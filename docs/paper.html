<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Technical Paper – People and Communities in Western Sydney</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-d4be639c637f3db3c684c66cefad7e0c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="assets/styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">People and Communities in Western Sydney</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> <i class="bi bi-book" role="img">
</i> 
<span class="menu-text">Story</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./dashboard.html"> <i class="bi bi-speedometer" role="img">
</i> 
<span class="menu-text">Dashboard</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./paper.html" aria-current="page"> <i class="bi bi-file-text" role="img">
</i> 
<span class="menu-text">Technical Paper</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/zachary-xie/" target="_blank"> <i class="bi bi-linkedin" role="img" aria-label="LinkedIn">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation" target="_blank"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background">Background</a></li>
  <li><a href="#scrollytelling" id="toc-scrollytelling" class="nav-link" data-scroll-target="#scrollytelling">Scrollytelling</a></li>
  <li><a href="#research-aim" id="toc-research-aim" class="nav-link" data-scroll-target="#research-aim">Research Aim</a></li>
  </ul></li>
  <li><a href="#data-source" id="toc-data-source" class="nav-link" data-scroll-target="#data-source">Data Source</a></li>
  <li><a href="#software-and-tools" id="toc-software-and-tools" class="nav-link" data-scroll-target="#software-and-tools">Software and Tools</a></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">Data Preparation</a>
  <ul class="collapse">
  <li><a href="#data-processing" id="toc-data-processing" class="nav-link" data-scroll-target="#data-processing">Data Processing</a>
  <ul class="collapse">
  <li><a href="#variable-cleaning" id="toc-variable-cleaning" class="nav-link" data-scroll-target="#variable-cleaning">Variable Cleaning</a></li>
  <li><a href="#geography-mapping" id="toc-geography-mapping" class="nav-link" data-scroll-target="#geography-mapping">Geography Mapping</a></li>
  </ul></li>
  <li><a href="#data-foundation" id="toc-data-foundation" class="nav-link" data-scroll-target="#data-foundation">Data Foundation</a>
  <ul class="collapse">
  <li><a href="#baseline-population" id="toc-baseline-population" class="nav-link" data-scroll-target="#baseline-population">Baseline Population</a></li>
  <li><a href="#geographic-classification" id="toc-geographic-classification" class="nav-link" data-scroll-target="#geographic-classification">Geographic Classification</a></li>
  </ul></li>
  <li><a href="#data-integration" id="toc-data-integration" class="nav-link" data-scroll-target="#data-integration">Data Integration</a>
  <ul class="collapse">
  <li><a href="#collapse-variables" id="toc-collapse-variables" class="nav-link" data-scroll-target="#collapse-variables">Collapse Variables</a></li>
  <li><a href="#integrate-variables" id="toc-integrate-variables" class="nav-link" data-scroll-target="#integrate-variables">Integrate Variables</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#exploratory-data-analysis-eda" id="toc-exploratory-data-analysis-eda" class="nav-link" data-scroll-target="#exploratory-data-analysis-eda">Exploratory Data Analysis (EDA)</a>
  <ul class="collapse">
  <li><a href="#plot-all-variables" id="toc-plot-all-variables" class="nav-link" data-scroll-target="#plot-all-variables">Plot All Variables</a></li>
  <li><a href="#deep-dive-into-topics" id="toc-deep-dive-into-topics" class="nav-link" data-scroll-target="#deep-dive-into-topics">Deep Dive into Topics</a>
  <ul class="collapse">
  <li><a href="#population-growth-2011-2021" id="toc-population-growth-2011-2021" class="nav-link" data-scroll-target="#population-growth-2011-2021">Population Growth (2011–2021)</a></li>
  <li><a href="#cultural-diversity" id="toc-cultural-diversity" class="nav-link" data-scroll-target="#cultural-diversity">Cultural Diversity</a></li>
  <li><a href="#socioeconomics-health-profiles" id="toc-socioeconomics-health-profiles" class="nav-link" data-scroll-target="#socioeconomics-health-profiles">Socioeconomics and Health Profiles</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#scrollytelling-techniques" id="toc-scrollytelling-techniques" class="nav-link" data-scroll-target="#scrollytelling-techniques">Scrollytelling Techniques</a>
  <ul class="collapse">
  <li><a href="#zooming-and-panning" id="toc-zooming-and-panning" class="nav-link" data-scroll-target="#zooming-and-panning">Zooming and Panning</a></li>
  <li><a href="#colour-pairing" id="toc-colour-pairing" class="nav-link" data-scroll-target="#colour-pairing">Colour Pairing</a></li>
  <li><a href="#spotlight-effect" id="toc-spotlight-effect" class="nav-link" data-scroll-target="#spotlight-effect">Spotlight Effect</a></li>
  <li><a href="#semi-transparent-effect" id="toc-semi-transparent-effect" class="nav-link" data-scroll-target="#semi-transparent-effect">Semi-transparent Effect</a></li>
  <li><a href="#interactivity" id="toc-interactivity" class="nav-link" data-scroll-target="#interactivity">Interactivity</a></li>
  </ul></li>
  <li><a href="#deployment" id="toc-deployment" class="nav-link" data-scroll-target="#deployment">Deployment</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Technical Paper</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
<p>In New South Wales (NSW), Australia, six local health districts cover the Sydney metropolitan region [1], collectively delivering public health services to over six million residents, as shown in Figure 1. These include:</p>
<ul>
<li>Nepean Blue Mountains Local Health District (NBMLHD)</li>
<li>Northern Sydney Local Health District (NSLHD)</li>
<li>South Eastern Sydney Local Health District (SESLHD)</li>
<li>South Western Sydney Local Health District (SWSLHD)</li>
<li>Sydney Local Health District</li>
<li>Western Sydney Local Health District (WSLHD)</li>
</ul>
<p><span style="font-size: 0.9rem;">Figure 1. Sydney metropolitan LHDs.</span> <img src="images/paper_p1.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"> <span style="font-size: 0.9rem;">Image Source: <a href="https://www.health.nsw.gov.au/lhd/Pages/default.aspx">NSW Health</a></span></p>
<p>WSLHD is a leader in clinical services in Sydney’s west [2], serving more than one million residents across four constituent Local Government Areas (LGAs): Blacktown, The Hills Shire, Cumberland, and Parramatta [2]. WSLHD is characterised by rapid population growth, cultural diversity, and wide socioeconomic variation. WSLHD population growth rate (10.3%) [3] was nearly double that of NSW (5.4%) [3] between 2020 and 2024. Half of residents were born overseas, and many postcodes within LGAs rank high on the socio-economic disadvantage scale [2]. Understanding the health and sociodemographic variation across the region is a key component to meet the healthcare needs of this large and diverse population.</p>
<p>Based on 2011 and 2016 Census data, the Social and Health Atlas [3] provides comprehensive tables that present key sociodemographic indicators in WSLHD, alongside 2016 geographical area maps. These resources established essential knowledge about population composition and socioeconomic characteristics across WSLHD. However, they don’t provide a structured narrative to help readers interpret the data. Also, the static tables and charts do not facilitate interactive exploration. The project utilises the scrollytelling technique to integrate narrative with dynamic visualisations and interactive exploration. These features enable readers to follow a coherent storyline, explore spatial patterns, and engage with the data.</p>
</section>
<section id="scrollytelling" class="level2">
<h2 class="anchored" data-anchor-id="scrollytelling">Scrollytelling</h2>
<p>The public needs to engage with population and health data because this interaction enables them to participate in community decisions through effective decision-making. The process of sharing intricate information with public audiences proves to be a challenge. The combination of storytelling with visualisation methods creates an excellent method to connect with different types of readers. Schröder et al.&nbsp;[4] demonstrated that storytelling with data visualisation has served as an essential method for interpreting global phenomena.</p>
<p>The traditional method of storytelling uses a reporting format that unites written content with visual elements. The text presents the story, and the images provide supporting evidence or related details [5]. However, the information in conventional reports becomes difficult for non-specialist readers to understand because the reports contain many statistics, dense tables and separate charts. Also, traditional reports typically lack interactive features, which restricts how readers can participate with the content. Schröder et al.&nbsp;[4] explained that allowing users to interact with visualisations provides a sense of control and encourages exploration, leading to a deeper understanding of data. The dashboard serves as a popular data visualisation tool that provides an interactive visual presentation through its concise design. Yet dashboards often sacrifice narrative for conciseness and interactivity, which limits the ability to convey the interpretation behind the data.</p>
<p>Scrollytelling is a long-form article frequently used in data-driven journalism. The term scrollytelling combines “storytelling” and “scrolling” [6]. The technique uses visual storytelling to present content that transforms automatically when users scroll through the material. Eric Mörth et al.&nbsp;[7] demonstrated that scrollytelling enables users to experience control and exploration through an interface that guides them toward a coherent experience. Scrollytelling combines narrative text, visual elements, and interactivity, providing readers with an immersive experience.</p>
</section>
<section id="research-aim" class="level2">
<h2 class="anchored" data-anchor-id="research-aim">Research Aim</h2>
<p>This project places WSLHD at the centre of the narrative and utilises the scrollytelling technique to present its health and sociodemographic profiles based on the 2011 and 2021 Census data. This project aims to communicate health data and engage a wide audience.</p>
</section>
</section>
<section id="data-source" class="level1">
<h1>Data Source</h1>
<p>This project used data from the Australian Bureau of Statistics (ABS), where variables are organised according to geographical units. The analysis focused on 2021 as the main reference year, while 2011 serves as the baseline for analysing population changes across different spatial scales over the past decade. Although the 2021 Census data are now four years old at the time of writing, they remain the most recent and comprehensive source for understanding sociodemographic patterns.</p>
<p>The variables used in this project come from the 2011 and 2021 Australian Census data in TableBuilder (Figure 2) [8], including demographics, socioeconomics, and health conditions. The 2021 Index of Relative Socio-economic Disadvantage (IRSD) dataset comes from the Socio-Economic Indexes for Areas (SEIFA) [9] collection on ABS.</p>
<p><span style="font-size: 0.9rem;">Figure 2. TableBuilder user interface.</span> <img src="images/paper_p2.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"> <span style="font-size: 0.9rem;">Image Source: <a href="https://www.abs.gov.au/statistics/microdata-tablebuilder/tablebuilder">ABS TableBuilder</a></span></p>
<p>Geographical units used in this project include Statistical Areas Level 2 (SA2), LGA, and LHD levels, allowing comparison across different spatial levels. Figure 3 shows an example of the geographic hierarchy of SA2, LGA, and LHD.</p>
<ul>
<li><p>SA2s represent small communities that interact socially and economically [10]. SA2s are the primary spatial unit for analysis.</p></li>
<li><p>LGAs represent administrative units governed by local councils [11]. This project includes 4 LGAs within WSLHD.</p></li>
<li><p>LHDs are health administration units defined by NSW Health. This project includes 6 metropolitan LHDs.</p></li>
</ul>
<p>The geospatial boundary data come from the <code>read_absmap()</code> function from the R package <code>strayr</code> (v.0.1.7) [12], which provides access to official Australian statistical geography shapefiles.</p>
<p><span style="font-size: 0.9rem;">Figure 3. Example of the geographic hierarchy: SA2, LGA, and LHD.</span> <img src="images/paper_p3.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>Additionally, this project used the SA2 boundary correspondence files for 2016–2021 and 2011–2016 to construct a 2011–2021 SA2 correspondence (rationale refers to section: <a href="#population-growth-2011-2021">Population Growth</a>). These two files come from the Australian Statistical Geography Standard (ASGS) Edition 3 [13] and ASGS Volume 1 [14].</p>
<p>Table 1 provides an overview of all data sources used in this project.</p>
<p><span style="font-size: 0.9rem;">Table 1. Overview of data sources.</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Data</th>
<th>Year</th>
<th>Source</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Demographic</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Age group</td>
<td>2021, 2011</td>
<td><a href="https://www.abs.gov.au/statistics/microdata-tablebuilder/tablebuilder">TableBuilder</a></td>
<td>Age in ten-year groups</td>
</tr>
<tr class="odd">
<td>Country of birth</td>
<td>2021</td>
<td><a href="https://www.abs.gov.au/statistics/microdata-tablebuilder/tablebuilder">TableBuilder</a></td>
<td>Country of birth of the person</td>
</tr>
<tr class="even">
<td>Language used at home</td>
<td>2021</td>
<td><a href="https://www.abs.gov.au/statistics/microdata-tablebuilder/tablebuilder">TableBuilder</a></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Socioeconomic</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Education level</td>
<td>2021</td>
<td><a href="https://www.abs.gov.au/statistics/microdata-tablebuilder/tablebuilder">TableBuilder</a></td>
<td>Level of highest educational attainment</td>
</tr>
<tr class="odd">
<td>Occupation</td>
<td>2021</td>
<td><a href="https://www.abs.gov.au/statistics/microdata-tablebuilder/tablebuilder">TableBuilder</a></td>
<td></td>
</tr>
<tr class="even">
<td>Personal income</td>
<td>2021</td>
<td><a href="https://www.abs.gov.au/statistics/microdata-tablebuilder/tablebuilder">TableBuilder</a></td>
<td>Weekly income</td>
</tr>
<tr class="odd">
<td>Housing type</td>
<td>2021</td>
<td><a href="https://www.abs.gov.au/statistics/microdata-tablebuilder/tablebuilder">TableBuilder</a></td>
<td>Tenure and landlord type</td>
</tr>
<tr class="even">
<td>IRSD</td>
<td>2021</td>
<td><a href="https://www.abs.gov.au/statistics/people/people-and-communities/socio-economic-indexes-areas-seifa-australia/latest-release">SEIFA</a></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Health condition</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Health condition</td>
<td>2021</td>
<td><a href="https://www.abs.gov.au/statistics/microdata-tablebuilder/tablebuilder">TableBuilder</a></td>
<td>Selected health conditions in the Census survey</td>
</tr>
<tr class="odd">
<td><strong>Geography</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>SA2</td>
<td>2021, 2011</td>
<td><a href="https://runapp-aus.github.io/strayr/"><code>strayr</code></a></td>
<td></td>
</tr>
<tr class="odd">
<td>LGA</td>
<td>2021, 2011</td>
<td><a href="https://runapp-aus.github.io/strayr/"><code>strayr</code></a></td>
<td></td>
</tr>
<tr class="even">
<td>LHD</td>
<td>2023</td>
<td><a href="https://runapp-aus.github.io/strayr/"><code>strayr</code></a></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>SA2 correspondence</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>2016–2021</td>
<td></td>
<td><a href="https://www.abs.gov.au/statistics/standards/australian-statistical-geography-standard-asgs-edition-3/jul2021-jun2026/access-and-downloads/correspondences">ASGS Edition 3</a></td>
<td></td>
</tr>
<tr class="odd">
<td>2011–2016</td>
<td></td>
<td><a href="https://www.abs.gov.au/AUSSTATS/abs@.nsf/DetailsPage/1270.0.55.001July%202016?OpenDocument">ASGS Volumn 1</a></td>
<td></td>
</tr>
</tbody>
</table>
<p><span style="font-size: 0.9rem;"><em>Note.</em></span> <span style="font-size: 0.9rem;"><em>Selected health conditions in the Census survey include arthritis, asthma, cancer, dementia, diabetes, heart disease, kidney disease, lung condition, mental health, and stroke.</em></span> <span style="font-size: 0.9rem;"><em><code>strayr</code> package provides only the 2023 LHD shapefile, so this boundary was used as the consistent reference for both 2011 and 2021 mapping. But this approach may not fully capture any minor historical boundary changes before 2023.</em></span></p>
</section>
<section id="software-and-tools" class="level1">
<h1>Software and Tools</h1>
<p>This project used RStudio (v.2025.05.0 + 496) as the primary computing software. R (v.4.5.1) and various open-source packages handled data wrangling and creating figures for the scrollytelling article. Table 2 lists the R packages used in this project, encompassing data wrangling, spatial analysis, and visualisation.</p>
<p><span style="font-size: 0.9rem;">Table 2. Overview of R packages used in this project.</span></p>
<table class="caption-top table">
<colgroup>
<col style="width: 40%">
<col style="width: 59%">
</colgroup>
<thead>
<tr class="header">
<th>Package</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Data Wrangling</strong></td>
<td></td>
</tr>
<tr class="even">
<td><code>readr</code></td>
<td>Reads and writes CSV files.</td>
</tr>
<tr class="odd">
<td><code>dplyr</code></td>
<td>Provides data manipulation functions such as <code>select()</code>, <code>mutate()</code>, and <code>filter()</code>.</td>
</tr>
<tr class="even">
<td><code>tidyr</code></td>
<td>Reshapes data between wide and long formats for analysis and plotting.</td>
</tr>
<tr class="odd">
<td><code>rlang</code></td>
<td>Supports tidy evaluation and dynamic programming within custom functions.</td>
</tr>
<tr class="even">
<td><code>stringr</code></td>
<td>Handles string operations for cleaning geographic and categorical labels.</td>
</tr>
<tr class="odd">
<td><code>forcats</code></td>
<td>Manages factor levels for consistent categorical ordering.</td>
</tr>
<tr class="even">
<td><strong>Spatial Data Wrangling</strong></td>
<td></td>
</tr>
<tr class="odd">
<td><code>sf</code></td>
<td>Manages vector-based spatial data and performs geometry operations.</td>
</tr>
<tr class="even">
<td><code>strayr</code></td>
<td>Provides Australian geographic data and standard spatial classifications.</td>
</tr>
<tr class="odd">
<td><code>smoothr</code></td>
<td>Provides tools to smooth, densify, simplify, and fix small geometry artefacts in <code>sf</code> objects.</td>
</tr>
<tr class="even">
<td><strong>Static Visualisation</strong></td>
<td></td>
</tr>
<tr class="odd">
<td><code>ggplot2</code></td>
<td>Core package for static visualisation, including choropleth maps and bar charts.</td>
</tr>
<tr class="even">
<td><code>scales</code></td>
<td>Formats legends and numeric values, such as percentages and deciles.</td>
</tr>
<tr class="odd">
<td><code>ggtext</code></td>
<td>Enables rich text within plot elements.</td>
</tr>
<tr class="even">
<td><code>ggrepel</code></td>
<td>Prevents overlapping text labels in scatter plots and maps.</td>
</tr>
<tr class="odd">
<td><code>biscale</code></td>
<td>Creates bivariate maps with dual-colour scales.</td>
</tr>
<tr class="even">
<td><code>patchwork</code>, <code>cowplot</code></td>
<td>Combines multiple plots into cohesive layouts.</td>
</tr>
<tr class="odd">
<td><strong>Interactive Tools</strong></td>
<td></td>
</tr>
<tr class="even">
<td><code>leaflet</code></td>
<td>Builds interactive web maps with zoom, hover, and filter functions.</td>
</tr>
<tr class="odd">
<td><code>plotly</code></td>
<td>Converts static plots to interactive charts with tooltips and dynamic legends.</td>
</tr>
<tr class="even">
<td><code>mapview</code></td>
<td>Provides interactive previews of spatial layers, enabling zoom, pan, and clickable features.</td>
</tr>
<tr class="odd">
<td><code>htmlwidgets</code></td>
<td>Provides a framework to embed R visualisations into web pages.</td>
</tr>
<tr class="even">
<td><code>htmltools</code></td>
<td>Manages HTML dependencies and custom UI elements.</td>
</tr>
<tr class="odd">
<td><code>webshot2</code></td>
<td>Captures HTML widgets as static images for reports or summaries.</td>
</tr>
</tbody>
</table>
<p><br> The scrollytelling and dashboard outputs were built using <code>Quarto</code>, incorporating the <code>closeread</code> extension for the scrollytelling page and the <code>dashboard</code> extension for the dashboard page.</p>
<ul>
<li><p>Quarto is an open-source publishing system that enables seamless integration of narrative text, code, and visualisations and supports the creation of interactive HTML documents [15].</p></li>
<li><p><code>closeread</code> package is a Quarto extension designed specifically for scrollytelling. It enables smooth scrolling transitions, scene-based storytelling, and interactive elements that enhance user engagement with the data narrative [16].</p></li>
<li><p><code>dashboard</code> package is a Quarto extension designed specifically for creating interactive dashboards. It can be used to customise layouts and use a wide variety of dashboard themes [17].</p></li>
</ul>
<p>The front-end interface used HTML, CSS, and JavaScript to enhance visual presentation and user interactivity.</p>
</section>
<section id="data-preparation" class="level1">
<h1>Data Preparation</h1>
<section id="data-processing" class="level2">
<h2 class="anchored" data-anchor-id="data-processing">Data Processing</h2>
<p>This stage focuses on preparing cleaned variables and mapping geography.</p>
<section id="variable-cleaning" class="level3">
<h3 class="anchored" data-anchor-id="variable-cleaning">Variable Cleaning</h3>
<p>Table 3 summarises all tasks in variable cleaning, including the datasets used, the datasets created, and the scripts developed.</p>
<p><span style="font-size: 0.9rem;">Table 3. Overview of the variable cleaning task.</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Variable</th>
<th>Used dataset</th>
<th>Created dataset</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Demographic</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Age group</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/1_age_group/age_group_raw_2021.csv"><code>age_group_raw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/1_age_group/age_group_nsw_2021.csv"><code>age_group_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/1_age_group/age_group_2021.Rmd"><code>age_group_2021.Rmd</code></a></td>
</tr>
<tr class="odd">
<td></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2011/age_group_raw_2011.csv"><code>age_group_raw_2011.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2011/age_group_nsw_2011.csv"><code>age_group_nsw_2011.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2011/age_group_2011.Rmd"><code>age_group_2011.Rmd</code></a></td>
</tr>
<tr class="even">
<td>Country of birth</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/2_country_of_birth/cob_raw_2021.csv"><code>cob_raw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/2_country_of_birth/cob_nsw_2021.csv"><code>cob_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/2_country_of_birth/cob_2021.Rmd"><code>cob_2021.Rmd</code></a></td>
</tr>
<tr class="odd">
<td></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/2_country_of_birth/cobDetail_raw_2021.csv"><code>cobDetail_raw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/2_country_of_birth/cobDetail_nsw_2021.csv"><code>cobDetail_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/2_country_of_birth/cob2_2021.Rmd"><code>cob2_2021.Rmd</code></a></td>
</tr>
<tr class="even">
<td>Languages used at home</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/3_language_used_at_home/lang_raw_2021.csv"><code>lang_raw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/3_language_used_at_home/lang_nsw_2021.csv"><code>lang_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/3_language_used_at_home/lang_2021.Rmd"><code>lang_2021.Rmd</code></a></td>
</tr>
<tr class="odd">
<td></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/3_language_used_at_home/langDetail_raw_2021.csv"><code>langDetail_raw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/3_language_used_at_home/langDetail_nsw_2021.csv"><code>langDetail_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/3_language_used_at_home/lang2_2021.Rmd"><code>lang2_2021.Rmd</code></a></td>
</tr>
<tr class="even">
<td><strong>Socioeconomic</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Education level</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/2_socioeconomics/1_eduation_level/edu_level_raw_2021.csv"><code>edu_raw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/2_socioeconomics/1_eduation_level/edu_level_nsw_2021.csv"><code>edu_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/2_socioeconomics/1_eduation_level/edu_level_2021.Rmd"><code>edu_2021.Rmd</code></a></td>
</tr>
<tr class="even">
<td>Occupation</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/2_socioeconomics/2_occupation/occupation_raw_2021.csv"><code>occup_raw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/2_socioeconomics/2_occupation/occupation_nsw_2021.csv"><code>occup_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/2_socioeconomics/2_occupation/occupation_2021.Rmd"><code>occup_2021.Rmd</code></a></td>
</tr>
<tr class="odd">
<td>Personal income</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/2_socioeconomics/3_personal_income/personal_income_raw_2021.csv"><code>income_raw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/2_socioeconomics/3_personal_income/personal_income_nsw_2021.csv"><code>income_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/2_socioeconomics/3_personal_income/personal_income_2021.Rmd"><code>income_2021.Rmd</code></a></td>
</tr>
<tr class="even">
<td>Housing type</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/2_socioeconomics/4_housing_type/housing_type_raw_2021.csv"><code>house_ty_raw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/2_socioeconomics/4_housing_type/housing_type_nsw_2021.csv"><code>house_ty_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/2_socioeconomics/4_housing_type/housing_type_2021.Rmd"><code>housing_ty_2021.Rmd</code></a></td>
</tr>
<tr class="odd">
<td>IRSD</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/2_socioeconomics/5_irsd/irsd_raw_2021.csv"><code>irsd_raw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/2_socioeconomics/5_irsd/irsd_nsw_2021.csv"><code>irsd_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/2_socioeconomics/5_irsd/irsd_2021.Rmd"><code>irsd_2021.Rmd</code></a></td>
</tr>
<tr class="even">
<td><strong>Health condition</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Condition type</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/3_health%20conditions/1_healcons/cons_ty_raw_2021.csv"><code>cons_type_raw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/3_health%20conditions/1_healcons/cons_ty_nsw_2021.csv"><code>cons_ty_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/3_health%20conditions/1_healcons/cons_ty_2021.Rmd"><code>cons_ty_2021.Rmd</code></a></td>
</tr>
</tbody>
</table>
<p><br> In TableBuilder, I organised each dataset with NSW SA2s as rows and variables as columns, then downloaded and saved them as CSV files. I applied a consistent naming convention for all raw datasets, using the structure “variable_raw_year”. For example, the age dataset was named <code>age_group_raw_2021</code>. After cleaning, the naming convention remained the same except that “raw” was replaced with “nsw”, with the year indicating either 2021 or 2011.</p>
<p>I then developed a cleaning script to clean and standardise the variables. The script applies a consistent cleaning workflow across all raw datasets, where only the variable name needs to be modified when processing a different variable dataset. For example, renaming <code>age_group</code> to <code>cob</code> (country of birth) in the cleaning script. The script performs the following key steps:</p>
<ul>
<li><p>Removed descriptive lines at the head and tail of each CSV file that contain notes, retaining only the header and data rows.</p></li>
<li><p>Deleted the <code>Total</code> column and any aggregated summary rows to avoid double-counting during rate calculations.</p></li>
<li><p>Renamed the first column as <code>sa2</code>.</p></li>
<li><p>Saved the cleaned datasets under the naming convention.</p></li>
</ul>
<p><em>Note: For the country of birth and language used at home, two datasets with varying levels of detail were utilised. The rationale for this decision is discussed in the <a href="#cultural-diversity">Cultural Diversity</a> section.</em></p>
<p>These cleaning steps ensure that all raw datasets are cleaned into a consistent structure, with redundancies removed, thereby preparing the data for reliable merging and downstream analysis. Figure 4 shows an example of a raw data file downloaded from TableBuilder and the corresponding cleaned dataset following the steps described above.</p>
<p><span style="font-size: 0.9rem;">Figure 4. Example of a variable dataset before and after cleaning.</span> <img src="images/paper_p4.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>The cleaning process of the IRSD dataset followed these steps. This dataset was prepared for socioeconomics and health analysis (see section: <a href="##socioeconomics-health-profiles">Socioeconomics and Health Profiles</a>).</p>
<ul>
<li><p>Extracted the raw IRSD data from the SEIFA dataset (Table 2 within the SEIFA release) using Microsoft Excel 365.</p></li>
<li><p>Removed the descriptive lines at the head and tail of the table in Excel and saved the cleaned table as a raw CSV file.</p></li>
<li><p>Because some SA2 names in the raw IRSD dataset were incomplete, I developed a script to replace them using the authoritative <code>sa2_name_2021</code> values obtained through the <code>read_absmap()</code> function from the <code>strayr</code> package.</p></li>
<li><p>Saved the corrected dataset.</p></li>
</ul>
</section>
<section id="geography-mapping" class="level3">
<h3 class="anchored" data-anchor-id="geography-mapping">Geography Mapping</h3>
<p>This stage covered two tasks: mapping SA2s to LGAs and LHDs, and mapping 2021 SA2s and 2011 SA2s. Table 4 summarises all tasks in geography mapping.</p>
<p><span style="font-size: 0.9rem;">Table 4. Overview of the geography mapping task.</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Task</th>
<th>Used dataset</th>
<th>Created dataset</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Mapping 2021 SA2, LGA and LHD</td>
<td><code>read_absmap("sa22021")</code><br><code>read_absmap("lga2021")</code><br><code>read_absmap("nsw_lhd2023")</code><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/2_geography%20data/1_sa2_lga_lhd_2021/wslhd_sa2_2021.csv"><code>wslhd_sa2_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/2_geography%20data/1_sa2_lga_lhd_2021/sa2_lga_lhd_nsw_2021.csv"><code>sa2_lga_lhd_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/2_geography%20data/1_sa2_lga_lhd_2021/sa2_lga_wslhd_2021.csv"><code>sa2_lga_lhd_wslhd_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/2_geography%20data/1_sa2_lga_lhd_2021/map_sa2_lhd_lga_2021.Rmd"><code>map_sa2_lhd_lga_2021.Rmd</code></a></td>
</tr>
<tr class="even">
<td>Mapping 2011 SA2, LGA and LHD</td>
<td><code>read_absmap("sa22011")</code><br><code>read_absmap("lga2011")</code><br><code>read_absmap("nsw_lhd2023")</code><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/2_geography%20data/2_sa2_lga_lhd_2011/wslhd_sa2_2011.csv"><code>wslhd_sa2_2011.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/2_geography%20data/2_sa2_lga_lhd_2011/sa2_lga_lhd_nsw_2011.csv"><code>sa2_lga_lhd_nsw_2011.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/2_geography%20data/2_sa2_lga_lhd_2011/sa2_lga_wslhd_2011.csv"><code>sa2_lga_lhd_wslhd_2011.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/2_geography%20data/2_sa2_lga_lhd_2011/map_sa2_lhd_lga_2011.Rmd"><code>map_sa2_lhd_lga_2011.Rmd</code></a></td>
</tr>
<tr class="odd">
<td>Mapping 2011 and 2021 SA2s</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/2_geography%20data/3_sa2_21_11/CG_SA2_2011_SA2_2016.csv"><code>CG_SA2_2011_SA2_2016.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/2_geography%20data/3_sa2_21_11/CG_SA2_2016_SA2_2021.csv"><code>CG_SA2_2016_SA2_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/2_geography%20data/3_sa2_21_11/sa2_lga_lhd_nsw_2021.csv"><code>sa2_lga_lhd_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/2_geography%20data/3_sa2_21_11/sa2_corres_to_2021.csv"><code>sa2_corres_to_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/2_geography%20data/3_sa2_21_11/sa2_corres_from_2011.csv"><code>sa2_corres_from_2011.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/2_geography%20data/3_sa2_21_11/map_sa2_2011_2021.Rmd"><code>map_sa2_2011_2021.Rmd</code></a></td>
</tr>
</tbody>
</table>
<section id="mapping-sa2-lga-and-lhd-correspondences" class="level4">
<h4 class="anchored" data-anchor-id="mapping-sa2-lga-and-lhd-correspondences"><strong>Mapping SA2, LGA and LHD Correspondences</strong></h4>
<p>I developed two parallel scripts (2021 and 2011) to map NSW SA2s to their corresponding LGAs and LHDs. When SA2 overlaps occurred in different LGAs or LHDs, I assigned each SA2 to the LGA or LHD with the largest area of intersection to maintain a one-to-one relationship between SA2, LGA, and LHD, and I saved two datasets for both years. For example, the SA2 “Toongabbie – West” lies mostly within Blacktown, with a smaller portion extending into Cumberland. So, it was classified under Blacktown LGA. Similarly, the SA2 “Dural – Kenthurst – Wisemans Ferry” spans both WSLHD and NSLHD, but because most of its area falls within WSLHD, it was assigned to WSLHD.</p>
<p>But this classifying approach leaves some partially covered SA2s unassigned to their overlapping LGAs or LHDs. For example, the SA2 “Eastwood” lies mostly within NSLHD, with only a smaller portion lying within WSLHD. To ensure that WSLHD fully captured all SA2s within its geographic extent, I applied an additional manual step using reference mapping lists. Specifically, SA2s that intersect WSLHD but were not assigned to WSLHD under the largest area rule were manually appended to the WSLHD mapping. This process resulted in two WSLHD-specific mapping datasets for both years, which were used in subsequent WSLHD-focused analyses to ensure that all SA2s within the WSLHD geographic coverage were included.</p>
</section>
<section id="mapping-2021-and-2011-sa2-correspondences" class="level4">
<h4 class="anchored" data-anchor-id="mapping-2021-and-2011-sa2-correspondences"><strong>Mapping 2021 and 2011 SA2 Correspondences</strong></h4>
<p>The SA2 boundaries changed between 2011 and 2021. For example, the 2016 SA2 “Riverstone - Marsden Park” was split into four smaller SA2s in 2021. They are called “Riverstone”, “Marsden Park – Shanes Park”, “Schofields (West) – Colebee” and “Schofields – East” [18]. To ensure comparability of population data across time, I need to establish a consistent correspondence between the different SA2 versions.</p>
<p>ABS provides correspondence files only for the 2011-2016 and 2016-2021 SA2 boundaries. Two correspondence files include ratios to describe how much one SA2 overlaps with another. I developed a script to link the 2011-2016 and 2016-2021 correspondence tables to derive a chained relationship between 2011 SA2 and 2021 SA2. The mapping process followed the following steps <a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/2_geography%20data/3_sa2_21_11/map_sa2_2011_2021.Rmd">(check calculation)</a>:</p>
<p>Computed chained weight along each 2011-2016-2021 path:</p>
<p><span class="math display">
w_{11,21} = w_{11,16} \times w_{16,21}
</span></p>
<p>where <span class="math inline">w_{11,16}</span> is the 2011–2016 correspondence ratio and <span class="math inline">w_{16,21}</span> is the 2016–2021 correspondence ratio.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute chained weight along each 2011→2016→2021 path</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">w_11_21 =</span> w_11_16 <span class="sc">*</span> w_16_21)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Aggregated to 2011–2021 pairs: If a 2011–2021 pair was connected through multiple 2016 SA2s, their intermediate weights were summed to produce a single <code>weight_raw</code> value for that pair:</p>
<p><span class="math display">
\mathrm{weight}_{\text{raw}}(i, j) = \sum w_{11,21}(i, j)
</span></p>
<p>where <span class="math inline">i</span> represents a 2011 SA2 and <span class="math inline">j</span> represents a 2021 SA2.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggregate weights for each unique 2011–2021 SA2 pair</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(sa2_code_2011, sa2_name_2011, sa2_code_2021, sa2_name_2021) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(<span class="at">weight_raw =</span> <span class="fu">sum</span>(w_11_21, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>For each 2021 SA2 <span class="math inline">(j)</span>, the raw weights from all contributing 2011 SA2s <span class="math inline">(i)</span> were normalised so that their total equals 1. I created a new variable, <code>weight_2021</code>, to represent these normalised weights:</p>
<p><span class="math display">
\mathrm{weight}_{2021}(i, j)
=
\frac{\mathrm{weight}_{\text{raw}}(i, j)}
{\sum \mathrm{weight}_{\text{raw}}(i, j')}
</span></p>
<p>This equation represents how much of each 2021 SA2 came from each 2011 SA2.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For each 2021 SA2, weights from all 2011 SA2s sum to 1</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># p(2011 | 2021): contribution of 2011 SA2s to each 2021 SA2</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(sa2_code_2021, sa2_name_2021) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">weight_2021 =</span> weight_raw <span class="sc">/</span> <span class="fu">sum</span>(weight_raw, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ungroup</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>For each 2011 SA2 <span class="math inline">(i)</span>, the raw weights from all contributing 2021 SA2s <span class="math inline">(j)</span> were normalised so that their total equals 1. I created a new variable, <code>weight_2011</code>, to represent these normalised weights:</p>
<p><span class="math display">
\mathrm{weight}_{2011}(i, j)
=
\frac{\mathrm{weight}_{\text{raw}}(i, j)}
{\sum \mathrm{weight}_{\text{raw}}(i', j)}
</span></p>
<p>This equation represents how each 2011 SA2 was split across the 2021 SA2s.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For each 2011 SA2, weights to all 2021 SA2s sum to 1</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># p(2021 | 2011): how each 2011 SA2 is split across 2021 SA2s</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(sa2_code_2011, sa2_name_2011) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">weight_2011 =</span> weight_raw <span class="sc">/</span> <span class="fu">sum</span>(weight_raw, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Moreover, I integrated the 2021 LGA and LHD mapping into the 2 SA2 correspondence types. This integration enabled the correspondence tables to link both across time (2011–2021) and across geographies (SA2 - LGA - LHD). I then saved two datasets (2021 view and 2011 view).</p>
<p>Table 5 and Table 6 show examples of the 2011–2021 SA2 correspondence table from both perspectives. For instance, from the 2021 view, the 2021 SA2 “Box Hill – Nelson” was formed from two 2011 SA2s: 95% from “Rouse Hill - Beaumont Hills” and 44% from “Pitt Town - McGraths Hill”.</p>
<p><span style="font-size: 0.9rem;">Table 5. Example of the 2011–2021 SA2 correspondence table (2021 view).</span></p>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 33%">
<col style="width: 17%">
<col style="width: 17%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th>sa2_name_2021</th>
<th>sa2_name_2011</th>
<th>lga_name_2021</th>
<th>nsw_lhd_name</th>
<th>weight_2021</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Box Hill – Nelson</td>
<td>Rouse Hill – Beaumont Hills</td>
<td>The Hills Shire</td>
<td>Western Sydney</td>
<td>0.95</td>
</tr>
<tr class="even">
<td>Box Hill – Nelson</td>
<td>Pitt Town – McGraths Hill</td>
<td>The Hills Shire</td>
<td>Western Sydney</td>
<td>0.05</td>
</tr>
</tbody>
</table>
<p><br> From the 2011 view, the 2011 SA2 “Blacktown (South)” was split into two SA2s in 2021, with 70% reallocated to “Blacktown – West”, and 30% reallocated to “Blacktown – South”.</p>
<p><span style="font-size: 0.9rem;">Table 6. Example of the 2011–2021 SA2 correspondence table (2011 view).</span></p>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 24%">
<col style="width: 17%">
<col style="width: 18%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th>sa2_name_2011</th>
<th>sa2_name_2021</th>
<th>lga_name_2021</th>
<th>nsw_lhd_name</th>
<th>weight_2011</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Blacktown (South)</td>
<td>Blacktown – West</td>
<td>Blacktown</td>
<td>Western Sydney</td>
<td>0.56</td>
</tr>
<tr class="even">
<td>Blacktown (South)</td>
<td>Blacktown – South</td>
<td>Blacktown</td>
<td>Western Sydney</td>
<td>0.44</td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="data-foundation" class="level2">
<h2 class="anchored" data-anchor-id="data-foundation">Data Foundation</h2>
<p>In this stage, I prepared the cleaned variables and the geographic mapping lists. This step aims to provide a foundation for further analysis. The tasks include:</p>
<ul>
<li>Baseline population: Estimate population size for each SA2.</li>
<li>Geography Classification: Classify each SA2 as belonging to WSLHD or metropolitan LHDs.</li>
</ul>
<p>I developed two parallel scripts (2021 and 2011) to complete these tasks. Table 7 summarises all tasks in the baseline population and geographic classification task.</p>
<p><span style="font-size: 0.9rem;">Table 7. Overview of the baseline population and geographic classification task.</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Year</th>
<th>Used dataset</th>
<th>Created dataset</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2021</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/2__pop_size_geo_classfy/2021/age_group_raw_2021.csv"><code>age_group_raw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/2__pop_size_geo_classfy/2021/sa2_lga_lhd_nsw_2021.csv"><code>sa2_lga_lhd_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/2__pop_size_geo_classfy/2021/sa2_lga_wslhd_2021.csv"><code>sa2_lga_lhd_wslhd_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/2__pop_size_geo_classfy/2021/pop_size_nsw_2021.csv"><code>pop_size_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/2__pop_size_geo_classfy/2021/population_size_nsw_2021.Rmd"><code>population_size_nsw_2021.Rmd</code></a></td>
</tr>
<tr class="even">
<td>2011</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/2__pop_size_geo_classfy/2011/age_group_raw_2011.csv"><code>age_group_raw_2011.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/2__pop_size_geo_classfy/2011/sa2_lga_lhd_nsw_2011.csv"><code>sa2_lga_lhd_nsw_2011.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/2__pop_size_geo_classfy/2011/sa2_lga_wslhd_2011.csv"><code>sa2_lga_lhd_wslhd_2011.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/2__pop_size_geo_classfy/2011/pop_size_nsw_2011.csv"><code>pop_size_nsw_2011.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/2__pop_size_geo_classfy/2011/population_size_nsw_2011.Rmd"><code>population_size_nsw_2011.Rmd</code></a></td>
</tr>
</tbody>
</table>
<p><br> The next step is to estimate population sizes at the SA2 level across NSW. This step established a baseline denominator for calculating proportions of variables. And then, this step used the SA2-LGA-LHD mapping list to identify which NSW SA2 belongs to WSLHD or metropolitan LHDs.</p>
<section id="baseline-population" class="level3">
<h3 class="anchored" data-anchor-id="baseline-population">Baseline Population</h3>
<p>I extracted the <code>total</code> column from the raw age-group datasets as a new variable, <code>pop_size</code>, to represent the population size for each SA2. The total column is not a manual sum of age groups. It is the default total provided by the Census dataset, which I assume reflects the population count for each SA2. This step established a baseline denominator for calculating proportions of variables.</p>
</section>
<section id="geographic-classification" class="level3">
<h3 class="anchored" data-anchor-id="geographic-classification">Geographic Classification</h3>
<p>I created two new binary variables, <code>in_wslhd</code> and <code>in_metro</code> (1 = yes, 0 = no), using the SA2–LGA–LHD mapping table to indicate whether each SA2 was located within WSLHD or within the metropolitan LHDs.</p>
<p>I then selected key variables (<code>sa2_name_2021</code> or <code>sa2_name_2011</code>, <code>in_wslhd</code>, <code>in_metro</code>, and <code>pop_size</code>) and saved them as two summary datasets. These datasets provide the foundation for analysing population change and for integrating variables in later steps.</p>
</section>
</section>
<section id="data-integration" class="level2">
<h2 class="anchored" data-anchor-id="data-integration">Data Integration</h2>
<section id="collapse-variables" class="level3">
<h3 class="anchored" data-anchor-id="collapse-variables">Collapse Variables</h3>
<p>In this stage, I developed three scripts to integrate the demographics, socioeconomics, and health condition variables, respectively. Also, I developed an additional script to merge them with population size and geographic classifications. Table 8 summarises all tasks in the collapsed variables.</p>
<p><span style="font-size: 0.9rem;">Table 8. Overview of the collapsed variables task.</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Task</th>
<th>Used dataset</th>
<th>Created dataset</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Collapse demographics</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/1_demographics/age_group_nsw_2021.csv"><code>age_group_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/1_demographics/cob_nsw_2021.csv"><code>cob_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/1_demographics/lang_nsw_2021.csv"><code>lang_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/1_demographics/pop_size_nsw_2021.csv"><code>pop_size_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/1_demographics/demographics_nsw_2021.csv"><code>demographics_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/1_demographics/demographics_nsw_2021.Rmd"><code>demographics_nsw_2021.Rmd</code></a></td>
</tr>
<tr class="even">
<td>Collapse socioeconomics</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/2_socioeconomics/edu_level_nsw_2021.csv"><code>edu_level_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/2_socioeconomics/occupation_nsw_2021.csv"><code>occupation_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/2_socioeconomics/personal_income_nsw_2021.csv"><code>personal_income_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/2_socioeconomics/housing_type_nsw_2021.csv"><code>house_type_raw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/2_socioeconomics/pop_size_nsw_2021.csv"><code>pop_size_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/2_socioeconomics/socioeconomics_nsw_2021.csv"><code>socioeconomics_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/2_socioeconomics/socioeconomics_nsw_2021.Rmd"><code>socioeconomics_nsw_2021.Rmd</code></a></td>
</tr>
<tr class="odd">
<td>Collapse health conditions</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/3_health_conditions/cons_ty_nsw_2021.csv"><code>cons_ty_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/3_health_conditions/pop_size_nsw_2021.csv"><code>pop_size_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/3_health_conditions/healcons_nsw_2021.csv"><code>healcons_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/3_health_conditions/healthcons_nsw_2021.Rmd"><code>healcons_nsw_2021.Rmd</code></a></td>
</tr>
<tr class="even">
<td>Merge all</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/4_merge/demographics_nsw_2021.csv"><code>demographics_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/4_merge/socioeconomics_nsw_2021.csv"><code>socioeconomics_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/4_merge/healcons_nsw_2021.csv"><code>healcons_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/4_merge/cencus_nsw_2021.csv"><code>census_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/3_collapse_variables/4_merge/merge_nsw_2021.Rmd"><code>merge_nsw_2021.Rmd</code></a></td>
</tr>
</tbody>
</table>
<p><br> I integrated single-variable datasets by variable category. Taking demographics as an example, I integrated all demographic variable datasets and the 2021 population size dataset via the SA2 name. Integrating socioeconomics and health conditions followed the same workflows.</p>
<p>When integrating variables, I also collapsed detailed variable categories into broader groups for subsequent analysis, as shown in Table 9. I followed the principle that each collapsed group should remain concise, easy to distinguish and interpret.</p>
<p><span style="font-size: 0.9rem;">Table 9. Overview of collapsed variable group.</span></p>
<table class="caption-top table">
<colgroup>
<col style="width: 21%">
<col style="width: 34%">
<col style="width: 44%">
</colgroup>
<thead>
<tr class="header">
<th>Variable</th>
<th>Collapsed group</th>
<th>Collapsed rationale</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Demographic</strong></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Age group</td>
<td>0–19<br>20–39<br>40–59<br>60+</td>
<td>Reflect broad life stages and simplify interpretation.</td>
</tr>
<tr class="odd">
<td>Country of birth</td>
<td>Australia<br>Overseas<br>Not stated</td>
<td>Distinguish Australian-born residents from those born overseas.</td>
</tr>
<tr class="even">
<td>Language used at home</td>
<td>English<br>Non-English<br>Not stated</td>
<td>Separate English and non-English languages used in a simple form.</td>
</tr>
<tr class="odd">
<td><strong>Socioeconomic</strong></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Education level</td>
<td>Bachelor’s and above<br>Below Bachelor<br>Unknown</td>
<td>Distinguish tertiary-qualified residents from others.</td>
</tr>
<tr class="odd">
<td>Occupation</td>
<td>Managers or professionals<br>Everyone else<br>Unknown</td>
<td>Separate high-skill occupations from all other roles.</td>
</tr>
<tr class="even">
<td>Personal income</td>
<td>Less than median income<br>More than median income<br>Unknown</td>
<td>Median provides a clear income baseline.</td>
</tr>
<tr class="odd">
<td>Housing type</td>
<td>Social housing<br>Non-social housing<br>Unknown</td>
<td>Distinguish social housing from all other housing types.</td>
</tr>
<tr class="even">
<td><strong>Health conditions</strong></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Health condition type</td>
<td>Ten original categories</td>
<td>No need for collapsing.</td>
</tr>
</tbody>
</table>
<p><span style="font-size: 0.9rem;"><em>Note.</em></span> <span style="font-size: 0.9rem;"><em>Unknown includes responses marked as not stated, supplementary codes, or inadequately described conditions.</em></span> <span style="font-size: 0.9rem;"><em>Median income was the 2021 NSW median weekly income ($813) from ABS [19].</em></span> <span style="font-size: 0.9rem;"><em>Income data was accessed only in ranges, so minor boundary effects may exist.</em></span> <span style="font-size: 0.9rem;"><em>Social housing refers to dwellings provided by the government or community to people in need.</em></span></p>
<p>Then, I calculated the total number for each collapsed group and their proportions by applying the applicable denominator.</p>
<ul>
<li><p>For demographic and health condition variables, I used the SA2 population size as the denominator.</p></li>
<li><p>For socioeconomic variables (excluding tenure and landlord type), I derived the applicable population by removing the counts in the corresponding “not applicable” column from the population size and used this as the denominator.</p></li>
<li><p>For tenure and landlord type, I used the total number of occupied dwellings as the denominator.</p></li>
</ul>
</section>
<section id="integrate-variables" class="level3">
<h3 class="anchored" data-anchor-id="integrate-variables">Integrate Variables</h3>
<p>After collapsing variables, I calculated counts and proportions for the collapsed variable groups. I then created three new datasets, merged them and saved a new comprehensive dataset for data analysis.</p>
</section>
</section>
</section>
<section id="exploratory-data-analysis-eda" class="level1">
<h1>Exploratory Data Analysis (EDA)</h1>
<p>EDA covered two stages:</p>
<ul>
<li><p>Plot all variables: I plotted the counts and proportions of each variable across SA2s within the metropolitan LHDs and WSLHD to observe their geographic distributions and identify directions for further exploration.</p></li>
<li><p>Deep dive into topics: I conducted a deeper analysis focusing on specific topics identified from Stage 1.</p></li>
</ul>
<section id="plot-all-variables" class="level2">
<h2 class="anchored" data-anchor-id="plot-all-variables">Plot All Variables</h2>
<p>I developed a comprehensive script to generate choropleth maps of the 2021 variables for both the WSLHD and metropolitan LHDs. Table 10 summarises tasks in the variable visualisation.</p>
<p><span style="font-size: 0.9rem;">Table 10. Overview of the variable visualisation task.</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Task</th>
<th>Used dataset</th>
<th>Created dataset</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Plot all variables</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/1_initial/cencus_nsw_2021.csv"><code>census_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/1_initial/sa2_lga_lhd_nsw_2021.csv"><code>sa2_lga_lhd_nsw_2021.csv</code></a><br><code>read_absmap("sa22021")</code><br><code>read_absmap("lga2021")</code><br><code>read_absmap("nsw_lhd2023")</code></td>
<td>/</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/1_initial/eda_nsw_2021.Rmd"><code>eda_nsw_2021.Rmd</code></a></td>
</tr>
</tbody>
</table>
<p><br> The script performs the following main tasks: preparing spatial datasets with variables, standardising variable structures, and generating reusable mapping functions.</p>
<ol type="1">
<li>I loaded the cleaned attribute datasets and retrieved the official SA2, LGA, and LHD geometries using the <code>strayr</code> package, excluding non-residential SA2s and offshore areas to prevent visual distortion. I identified Non-residential SA2s by examining the lowest-population SA2s: the lowest 20 SA2s all had populations below 100, so they are identified as non-residential SA2s.</li>
</ol>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrange SA2s by population size in ascending order (smallest first)</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>check_pop_size <span class="ot">&lt;-</span> cencus_nsw_2021 <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(pop_size)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first 30 SA2s (lowest populations)</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(check_pop_size, <span class="dv">30</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract non-residential from check_pop_size</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>non_res_sa2 <span class="ot">&lt;-</span> check_pop_size <span class="sc">%&gt;%</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(pop_size) <span class="sc">%&gt;%</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Take the first 20 SA2s, </span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Their population was below 100 and considered non-residential</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">20</span>) <span class="sc">%&gt;%</span>            </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(sa2_name_2021) <span class="sc">%&gt;%</span>           </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.list</span>()</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Get all numeric columns in the dataset</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>num_cols <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">select</span>(cencus_nsw_2021, <span class="fu">where</span>(is.numeric)))</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Exclude columns that should not be cleaned</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>cols_to_clean <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(num_cols, <span class="fu">c</span>(<span class="st">"in_wslhd"</span>, <span class="st">"in_metro"</span>)) </span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="co"># For all numeric columns (except protected ones),</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="co"># set values to NA for the non-residential SA2 areas</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>cencus_nsw_2021_clean <span class="ot">&lt;-</span> cencus_nsw_2021 <span class="sc">%&gt;%</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(cols_to_clean),</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span> <span class="fu">ifelse</span>(sa2_name_2021 <span class="sc">%in%</span> non_res_sa2, <span class="cn">NA_real_</span>, .)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ol start="2" type="1">
<li>I then constructed map-ready spatial datasets for both WSLHD and metropolitan LHD variables, harmonising coordinate systems and limiting boundary overlays to the relevant geographic extent.</li>
</ol>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ======== Prepare spatial datasets for wslhd  ========</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define LGAs in WSLHD</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>wslhd_lgas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Blacktown"</span>,<span class="st">"Parramatta"</span>,<span class="st">"Cumberland"</span>,<span class="st">"The Hills Shire"</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Integrate wslhd SA2 geometries with wslhd census data</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>map_wslhd_2021 <span class="ot">&lt;-</span> sa2_map_2021 <span class="sc">%&gt;%</span> </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(cencus_nsw_2021_clean, <span class="at">by =</span> <span class="st">"sa2_name_2021"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(in_wslhd <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract LGA boundaries for WSLHD</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>lga_wslhd_2021 <span class="ot">&lt;-</span> lga_map_2021 <span class="sc">%&gt;%</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lga_name_2021 <span class="sc">%in%</span> wslhd_lgas) <span class="sc">%&gt;%</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="at">crs =</span> <span class="fu">st_crs</span>(map_wslhd_2021))</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ======== Prepare spatial datasets for metropolitan  ========</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep six metropolitan LHDs</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>metro_nsw_lhd <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Nepean Blue Mountains"</span>,<span class="st">"Northern Sydney"</span>,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">"South Eastern Sydney"</span>,<span class="st">"South Western Sydney"</span>,</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Sydney"</span>,<span class="st">"Western Sydney"</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Integrate metropolitan SA2 geometries with metropolitan census data</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>map_metro_2021 <span class="ot">&lt;-</span> sa2_map_2021 <span class="sc">%&gt;%</span> </span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(cencus_nsw_2021_clean, <span class="at">by =</span> <span class="st">"sa2_name_2021"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(in_metro <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a><span class="co"># --- SA2s inside metropolitan LHDs → geometry for mask and bbox ---</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Select metropolitan SA2 from mapping list</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>sa2_set_2021 <span class="ot">&lt;-</span> geo_nsw_2021 <span class="sc">%&gt;%</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nsw_lhd_name <span class="sc">%in%</span> metro_nsw_lhd) <span class="sc">%&gt;%</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(sa2_name_2021) <span class="sc">%&gt;%</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Join metropolitan SA2 geometries</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>sa2_metro_2021 <span class="ot">&lt;-</span> sa2_map_2021 <span class="sc">%&gt;%</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sa2_name_2021 <span class="sc">%in%</span> sa2_set_2021)</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a><span class="co"># --- LGAs inside metropolitan LHDs → geometry for overlay ---</span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Select metropolitan LGA from mapping list</span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>lga_set <span class="ot">&lt;-</span> geo_nsw_2021 <span class="sc">%&gt;%</span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nsw_lhd_name <span class="sc">%in%</span> metro_nsw_lhd) <span class="sc">%&gt;%</span></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(lga_name_2021) <span class="sc">%&gt;%</span></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Join metropolitan LGA geometries</span></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>lga_metro_2021 <span class="ot">&lt;-</span> lga_map_2021 <span class="sc">%&gt;%</span></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lga_name_2021 <span class="sc">%in%</span> lga_set)</span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a><span class="co"># --- LHD geometry for overlay ---</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Join metropolitan LHD geometries</span></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>lhd_metro_2021 <span class="ot">&lt;-</span> lhd_map_2023 <span class="sc">%&gt;%</span></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nsw_lhd_name <span class="sc">%in%</span> metro_nsw_lhd)</span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a><span class="co"># ---Align CRS to SA2 layer to ensure overlays line up ---</span></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>lga_metro_2021 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(lga_metro_2021, <span class="fu">st_crs</span>(sa2_metro_2021))</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>lhd_metro_2021 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(lhd_metro_2021, <span class="fu">st_crs</span>(sa2_metro_2021))</span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Build a metro mask from SA2s and clip LGA/LHD to the metro extent ---</span></span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a><span class="co"># union of metro SA2 as clipping mask</span></span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>metro_mask <span class="ot">&lt;-</span> sa2_metro_2021 <span class="sc">%&gt;%</span></span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_union</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_make_valid</span>()</span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a><span class="co"># intersection (clip to mask)</span></span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a>lga_metro_clip_2021 <span class="ot">&lt;-</span> <span class="fu">st_intersection</span>(lga_metro_2021, metro_mask)</span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>lhd_metro_clip_2021 <span class="ot">&lt;-</span> <span class="fu">st_intersection</span>(lhd_metro_2021, metro_mask)</span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a><span class="co"># bbox for coord_sf</span></span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>bbox <span class="ot">&lt;-</span> <span class="fu">st_bbox</span>(sa2_metro_2021)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ol start="3" type="1">
<li>To streamline plotting, I defined two helper functions: one for converting variables from wide to long format by region (WSLHD or metropolitan), and another for generating faceted SA2 choropleths with consistent colour scales and optional LGA or LHD boundary overlays.</li>
</ol>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ======== Create a data converting function  ========</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardise the recurring “wide → long → map” process </span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>build_long_sf_tag <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                              <span class="co"># Containing SA2 attributes and geometry</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>                              map_sf,               </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>                              </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>                              <span class="co"># unique id column used to rejoin geometry (sa2_name_2021)</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>                              id_col, </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>                              </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>                              <span class="co"># Pivot into long form (indicators to facet)</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>                              vars,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>                              </span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>                              <span class="co"># wslhd or metro</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>                              <span class="at">tag =</span> <span class="cn">NULL</span>,  </span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>                              </span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>                              <span class="at">facet_name =</span> <span class="cn">NULL</span>,  <span class="co"># custom facet column name</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>                              <span class="at">value_name =</span> <span class="cn">NULL</span>   <span class="co"># custom value column name</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>                              ) {                     </span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Basic checks</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>(<span class="fu">inherits</span>(map_sf, <span class="st">"sf"</span>))</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>(id_col <span class="sc">%in%</span> <span class="fu">names</span>(map_sf))</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Keep only variables that exist, and only numeric ones</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  vars <span class="ot">&lt;-</span> <span class="fu">intersect</span>(vars, <span class="fu">names</span>(map_sf))</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(vars) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"None of the requested vars exist in `map_sf`."</span>)</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  is_num <span class="ot">&lt;-</span> <span class="fu">vapply</span>(map_sf[vars], is.numeric, <span class="fu">logical</span>(<span class="dv">1</span>))</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>  vars   <span class="ot">&lt;-</span> vars[is_num]</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(vars) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">"None of the requested vars are numeric in `map_sf`."</span>)</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Dynamically name facet/value columns </span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>  facet_col <span class="ot">&lt;-</span> facet_name <span class="sc">%||%</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(tag)) <span class="fu">paste0</span>(<span class="st">"facet_var_"</span>, tag) <span class="cf">else</span> <span class="st">"facet_var"</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>  value_col <span class="ot">&lt;-</span> value_name <span class="sc">%||%</span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(tag)) <span class="fu">paste0</span>(<span class="st">"value_"</span>, tag) <span class="cf">else</span> <span class="st">"value"</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Wide -&gt; long</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>  long_df <span class="ot">&lt;-</span> map_sf <span class="sc">%&gt;%</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="fu">all_of</span>(<span class="fu">c</span>(id_col, vars))) <span class="sc">%&gt;%</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(</span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">cols      =</span> <span class="fu">all_of</span>(vars),</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">names_to  =</span> facet_col,</span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>      <span class="at">values_to =</span> value_col</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!!</span><span class="at">facet_col :=</span> <span class="fu">factor</span>(.data[[facet_col]], <span class="at">levels =</span> vars)</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Join geometry back and return sf</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>  long_sf <span class="ot">&lt;-</span> long_df <span class="sc">%&gt;%</span></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(<span class="fu">st_as_sf</span>(map_sf[, <span class="fu">c</span>(id_col, <span class="st">"geometry"</span>)]), <span class="at">by =</span> id_col) <span class="sc">%&gt;%</span></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_as_sf</span>()</span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Store dynamic column names as attributes for downstream plotting</span></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(long_sf, <span class="st">"facet_col"</span>) <span class="ot">&lt;-</span> facet_col</span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(long_sf, <span class="st">"value_col"</span>) <span class="ot">&lt;-</span> value_col</span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(long_sf)</span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a><span class="co"># ======== Create a plotting map function  ========</span></span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce faceted SA2 choropleths</span></span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a>facet_sa2_maps <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a>  map_sf,                 <span class="co"># sf with attributes to plot (already filtered to region)</span></span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a>  vars,                   <span class="co"># character vector of numeric columns to facet</span></span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a>  title,                  <span class="co"># plot title</span></span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a>  <span class="co"># region &amp; id</span></span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode        =</span> <span class="fu">c</span>(<span class="st">"wslhd"</span>, <span class="st">"metro"</span>),</span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a>  <span class="at">id_col      =</span> <span class="st">"sa2_name_2021"</span>,</span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a>  <span class="at">tag         =</span> <span class="cn">NULL</span>,     <span class="co"># "wslhd", "metro"</span></span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a>  <span class="co"># overlays</span></span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>  <span class="at">lga_sf      =</span> <span class="cn">NULL</span>,     <span class="co"># WSLHD: LGA; Metro: clipped LGA layer</span></span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a>  <span class="at">lhd_sf      =</span> <span class="cn">NULL</span>,     <span class="co"># Metro only: clipped LHD layer</span></span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a>  <span class="at">bbox        =</span> <span class="cn">NULL</span>,     <span class="co"># Metro only: named vector from st_bbox()</span></span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a>  <span class="co"># legend &amp; scale</span></span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend_name =</span> <span class="st">"Value"</span>,</span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a>  <span class="at">label_fun   =</span> comma,    <span class="co"># use percent for proportions</span></span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a>  <span class="at">palette     =</span> <span class="st">"plasma"</span>,</span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a>  <span class="at">ncol        =</span> <span class="dv">4</span>,</span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a>  <span class="at">limits      =</span> <span class="cn">NULL</span>,             <span class="co"># if NULL -&gt; auto from data; else c(min, max)</span></span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a>  <span class="at">nice_by     =</span> <span class="cn">NULL</span>,   </span>
<span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a>  <span class="at">breaks      =</span> <span class="cn">NULL</span>,             <span class="co"># if NULL -&gt; ggplot decides</span></span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a>  <span class="at">na_fill     =</span> <span class="st">"grey"</span>,</span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a>  <span class="co"># boundary styling</span></span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a>  <span class="at">lga_color   =</span> <span class="st">"black"</span>,</span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a>  <span class="at">lga_size    =</span> <span class="fl">0.1</span>,</span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a>  <span class="at">lhd_color   =</span> <span class="st">"#144a74"</span>,</span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a>  <span class="at">lhd_size    =</span> <span class="fl">0.6</span></span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a>) {</span>
<span id="cb7-100"><a href="#cb7-100" aria-hidden="true" tabindex="-1"></a>  mode <span class="ot">&lt;-</span> <span class="fu">match.arg</span>(mode)</span>
<span id="cb7-101"><a href="#cb7-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-102"><a href="#cb7-102" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 1) Build long sf with tagged column names so multiple regions can coexist</span></span>
<span id="cb7-103"><a href="#cb7-103" aria-hidden="true" tabindex="-1"></a>  long_sf <span class="ot">&lt;-</span> <span class="fu">build_long_sf_tag</span>(</span>
<span id="cb7-104"><a href="#cb7-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">map_sf   =</span> map_sf,</span>
<span id="cb7-105"><a href="#cb7-105" aria-hidden="true" tabindex="-1"></a>    <span class="at">id_col   =</span> id_col,</span>
<span id="cb7-106"><a href="#cb7-106" aria-hidden="true" tabindex="-1"></a>    <span class="at">vars     =</span> vars,</span>
<span id="cb7-107"><a href="#cb7-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">tag      =</span> tag <span class="sc">%||%</span> mode      <span class="co"># default tag to the mode</span></span>
<span id="cb7-108"><a href="#cb7-108" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-109"><a href="#cb7-109" aria-hidden="true" tabindex="-1"></a>  facet_col <span class="ot">&lt;-</span> <span class="fu">attr</span>(long_sf, <span class="st">"facet_col"</span>) </span>
<span id="cb7-110"><a href="#cb7-110" aria-hidden="true" tabindex="-1"></a>  value_col <span class="ot">&lt;-</span> <span class="fu">attr</span>(long_sf, <span class="st">"value_col"</span>) </span>
<span id="cb7-111"><a href="#cb7-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-112"><a href="#cb7-112" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 2) Shared limits (for comparability across facets)</span></span>
<span id="cb7-113"><a href="#cb7-113" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(limits)) {</span>
<span id="cb7-114"><a href="#cb7-114" aria-hidden="true" tabindex="-1"></a>    max_val <span class="ot">&lt;-</span> <span class="fu">max</span>(long_sf[[value_col]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-115"><a href="#cb7-115" aria-hidden="true" tabindex="-1"></a>    min_val <span class="ot">&lt;-</span> <span class="fu">min</span>(long_sf[[value_col]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-116"><a href="#cb7-116" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(nice_by) <span class="sc">&amp;&amp;</span> <span class="fu">is.finite</span>(max_val)) {</span>
<span id="cb7-117"><a href="#cb7-117" aria-hidden="true" tabindex="-1"></a>      max_val <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(max_val <span class="sc">/</span> nice_by) <span class="sc">*</span> nice_by</span>
<span id="cb7-118"><a href="#cb7-118" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-119"><a href="#cb7-119" aria-hidden="true" tabindex="-1"></a>    limits <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">max</span>(<span class="dv">0</span>, min_val, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), max_val)</span>
<span id="cb7-120"><a href="#cb7-120" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-121"><a href="#cb7-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-122"><a href="#cb7-122" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Build plot</span></span>
<span id="cb7-123"><a href="#cb7-123" aria-hidden="true" tabindex="-1"></a>  facet_formula <span class="ot">&lt;-</span> <span class="fu">as.formula</span>(<span class="fu">paste</span>(<span class="st">"~"</span>, facet_col))</span>
<span id="cb7-124"><a href="#cb7-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-125"><a href="#cb7-125" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(long_sf) <span class="sc">+</span></span>
<span id="cb7-126"><a href="#cb7-126" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> .data[[value_col]]),</span>
<span id="cb7-127"><a href="#cb7-127" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">linewidth =</span> <span class="fl">0.05</span>, <span class="at">show.legend =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb7-128"><a href="#cb7-128" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-129"><a href="#cb7-129" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(facet_formula, <span class="at">ncol =</span> ncol, <span class="at">labeller =</span> label_value) <span class="sc">+</span></span>
<span id="cb7-130"><a href="#cb7-130" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-131"><a href="#cb7-131" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis_c</span>(</span>
<span id="cb7-132"><a href="#cb7-132" aria-hidden="true" tabindex="-1"></a>      <span class="at">option   =</span> palette,</span>
<span id="cb7-133"><a href="#cb7-133" aria-hidden="true" tabindex="-1"></a>      <span class="at">name     =</span> legend_name,</span>
<span id="cb7-134"><a href="#cb7-134" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels   =</span> label_fun,</span>
<span id="cb7-135"><a href="#cb7-135" aria-hidden="true" tabindex="-1"></a>      <span class="at">oob      =</span> scales<span class="sc">::</span>squish,</span>
<span id="cb7-136"><a href="#cb7-136" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.value =</span> na_fill</span>
<span id="cb7-137"><a href="#cb7-137" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb7-138"><a href="#cb7-138" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> title,</span>
<span id="cb7-139"><a href="#cb7-139" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">"Note: Grey areas represent non-residential zones."</span>) <span class="sc">+</span></span>
<span id="cb7-140"><a href="#cb7-140" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb7-141"><a href="#cb7-141" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb7-142"><a href="#cb7-142" aria-hidden="true" tabindex="-1"></a>      <span class="at">strip.text      =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb7-143"><a href="#cb7-143" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.text       =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb7-144"><a href="#cb7-144" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.ticks      =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb7-145"><a href="#cb7-145" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.grid      =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb7-146"><a href="#cb7-146" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb7-147"><a href="#cb7-147" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.caption    =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>, <span class="at">hjust =</span> <span class="dv">0</span>)</span>
<span id="cb7-148"><a href="#cb7-148" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-149"><a href="#cb7-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-150"><a href="#cb7-150" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Overlays &amp; cropping depend on mode</span></span>
<span id="cb7-151"><a href="#cb7-151" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(lga_sf)) {</span>
<span id="cb7-152"><a href="#cb7-152" aria-hidden="true" tabindex="-1"></a>    p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="at">data =</span> lga_sf, <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>,</span>
<span id="cb7-153"><a href="#cb7-153" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> lga_color, <span class="at">linewidth =</span> lga_size, <span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-154"><a href="#cb7-154" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-155"><a href="#cb7-155" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (mode <span class="sc">==</span> <span class="st">"metro"</span>) {</span>
<span id="cb7-156"><a href="#cb7-156" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(lhd_sf)) {</span>
<span id="cb7-157"><a href="#cb7-157" aria-hidden="true" tabindex="-1"></a>      p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="at">data =</span> lhd_sf, <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>,</span>
<span id="cb7-158"><a href="#cb7-158" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> lhd_color, <span class="at">linewidth =</span> lhd_size, <span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-159"><a href="#cb7-159" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-160"><a href="#cb7-160" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(bbox)) {</span>
<span id="cb7-161"><a href="#cb7-161" aria-hidden="true" tabindex="-1"></a>      p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">coord_sf</span>(</span>
<span id="cb7-162"><a href="#cb7-162" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlim =</span> <span class="fu">c</span>(bbox[<span class="st">"xmin"</span>], bbox[<span class="st">"xmax"</span>]),</span>
<span id="cb7-163"><a href="#cb7-163" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylim =</span> <span class="fu">c</span>(bbox[<span class="st">"ymin"</span>], bbox[<span class="st">"ymax"</span>]),</span>
<span id="cb7-164"><a href="#cb7-164" aria-hidden="true" tabindex="-1"></a>        <span class="at">expand =</span> <span class="cn">FALSE</span></span>
<span id="cb7-165"><a href="#cb7-165" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb7-166"><a href="#cb7-166" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-167"><a href="#cb7-167" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-168"><a href="#cb7-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-169"><a href="#cb7-169" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(p)</span>
<span id="cb7-170"><a href="#cb7-170" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ol start="4" type="1">
<li>Building above, I produced choropleth maps showing the counts and proportions of each variable for both WSLHD and metropolitan LHDs.</li>
</ol>
<p>According to choropleth maps, I summarised the Key findings as follows.</p>
<p>Figure 5 shows that WSLHD ranks among the most populous metropolitan LHDs, with approximately half of its SA2s containing more than 15,000 residents.</p>
<p><span style="font-size: 0.9rem;">Figure 5. Population size in metropolitan LHDs and WSLHD, 2021 Census.</span> <img src="images/paper_p5.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>Figure 6 shows that in terms of age composition, young adults (20–39) represent the largest group, followed by children and teens (0–19). This suggests potential for a deeper analysis of overall population growth and age-specific growth trends.</p>
<p><span style="font-size: 0.9rem;">Figure 6. Age-Group population distribution in WSLHD, 2021 Census.</span> <img src="images/paper_p6.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>Figure 7 shows that in southern WSLHD, the proportions of overseas-born and non-English language used at home appear to be roughly half. This finding suggests two directions for further exploration: how these patterns vary spatially, and which specific countries of birth and languages contribute to this cultural diversity.</p>
<p><span style="font-size: 0.9rem;">Figure 7. Distribution of country of birth and language used at home in WSLHD, 2021 Census.</span> <img src="images/paper_p7.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>Figure 8 demonstrates that WSLHD shows distinct patterns of socioeconomic distribution. Central areas show distinct socioeconomic advantages characterised by higher educational attainment, higher professional and managerial occupations, higher incomes, and lower social housing. Northern areas show relatively stable profiles, while southern areas display extensive socioeconomic disadvantages. The observed patterns require a deeper examination of socioeconomics within WSLHD.</p>
<p><span style="font-size: 0.9rem;">Figure 8. Distribution of education and occupation in WSLHD, 2021 Census.</span> <img src="images/paper_p8.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>Figure 9 shows that Arthritis, asthma, diabetes, and mental health conditions emerged as the most prevalent long-term illnesses across WSLHD, reflecting the key areas of chronic disease burden within these regions.</p>
<p><span style="font-size: 0.9rem;">Figure 9. Distribution of selected health conditions in WSLHD, 2021 Census.</span> <img src="images/paper_p9.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
</section>
<section id="deep-dive-into-topics" class="level2">
<h2 class="anchored" data-anchor-id="deep-dive-into-topics">Deep Dive into Topics</h2>
<p>Based on the findings from Stage 1, I identified three topics for further exploration: population growth, cultural diversity, socioeconomics and health profiles. These three topics also shape the main body of the scrollytelling article.</p>
<section id="population-growth-2011-2021" class="level3">
<h3 class="anchored" data-anchor-id="population-growth-2011-2021">Population Growth (2011–2021)</h3>
<p>According to the population size and age group choropleths, WSLHD had one of the largest populations in 2021, with a large proportion of young people. In this section, I compared population changes across the 6 metropolitan LHDs and 4 LGAs within WSLHD. I further examined age-group population changes within WSLHD over the same period. Table 11 summarises tasks in calculating population growth.</p>
<p><span style="font-size: 0.9rem;">Table 11. Overview of the population growth exploration task.</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Task</th>
<th>Used dataset</th>
<th>Created dataset</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Calculate population growth for each SA2</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/1_cal_pop_growth_nsw/pop_size_nsw_2021.csv"><code>pop_size_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/1_cal_pop_growth_nsw/pop_size_nsw_2011.csv"><code>pop_size_nsw_2011.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/1_cal_pop_growth_nsw/sa2_corres_from_2011.csv"><code>sa2_corres_from_2011.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/1_cal_pop_growth_nsw/pop_size_nsw_compare.csv"><code>pop_size_nsw_compare.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/1_cal_pop_growth_nsw/pop_size_nsw_compare.Rmd"><code>pop_size_nsw_compare.Rmd</code></a></td>
</tr>
<tr class="even">
<td>Explore population growth from metropolitan to WSLHD</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/2_eda_pop_growth/pop_size_nsw_compare.csv"><code>pop_size_nsw_compare.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/2_eda_pop_growth/sa2_lga_lhd_nsw_2021.csv"><code>sa2_lga_lhd_nsw_2021.csv</code></a></td>
<td>/</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/2_eda_pop_growth/eda_pop_growth.Rmd"><code>eda_pop_growth.Rmd</code></a></td>
</tr>
<tr class="odd">
<td>Calculate population growth by age group</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/3_eda_age_structure/1_cal_growth_by_group/age_group_nsw_2021.csv"><code>age_group_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/3_eda_age_structure/1_cal_growth_by_group/age_group_nsw_2011.csv"><code>age_group_nsw_2011.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/3_eda_age_structure/1_cal_growth_by_group/sa2_lga_lhd_nsw_2021.csv"><code>sa2_lga_lhd_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/3_eda_age_structure/1_cal_growth_by_group/sa2_lga_wslhd_2021.csv"><code>sa2_lga_wslhd_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/3_eda_age_structure/1_cal_growth_by_group/sa2_corres_from_2011.csv"><code>sa2_corres_from_2011.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/3_eda_age_structure/1_cal_growth_by_group/age_nsw_compare.csv"><code>age_nsw_compare.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/3_eda_age_structure/1_cal_growth_by_group/age_group_nsw_compare.Rmd"><code>age_group_nsw_compare.Rmd</code></a></td>
</tr>
<tr class="even">
<td>Explore population growth by age group within WSLHD</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/3_eda_age_structure/2_eda_age_group/age_nsw_compare.csv"><code>age_nsw_compare.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/3_eda_age_structure/2_eda_age_group/pop_size_nsw_compare.csv"><code>pop_size_nsw_compare.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/3_eda_age_structure/2_eda_age_group/sa2_lga_lhd_nsw_2021.csv"><code>sa2_lga_lhd_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/3_eda_age_structure/2_eda_age_group/sa2_lga_wslhd_2021.csv"><code>sa2_lga_wslhd_2021.csv</code></a><br><code>read_absmap("sa22021")</code><br><code>read_absmap("lga2021")</code></td>
<td>/</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/3_eda_age_structure/2_eda_age_group/eda_age_group.Rmd"><code>eda_age_group.Rmd</code></a></td>
</tr>
</tbody>
</table>
<section id="calculate-population-growth-for-each-sa2" class="level4">
<h4 class="anchored" data-anchor-id="calculate-population-growth-for-each-sa2"><strong>Calculate Population Growth for Each SA2</strong></h4>
<p>To compare population changes over time using consistent spatial units, I reallocated the 2011 SA2 populations to the 2021 SA2 boundaries. I developed a script to calculate the contribution of each 2011 SA2 to each 2021 SA2 <a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/2_pop_growth/1_cal_pop_growth_nsw/pop_size_nsw_compare.Rmd">(check calculation)</a>:</p>
<p><span class="math display">
\mathrm{pop}_{2011 \rightarrow 2021}
=
\sum
\left(
\mathrm{pop}_{2011}\times \mathrm{weight}_{2011}
\right)
</span></p>
<p>Where <span class="math inline">\mathrm{pop}_{2011}</span> represents the <code>pop_size</code> variable extracted from the 2011 population file. <span class="math inline">\mathrm{weight}_{2011}</span> represents the <code>weight_2011</code> variable extracted from the 2011-2021 SA2 correspondence file.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Build pair-level table: 2011 → 2021 with authoritative 2021 names ---</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>pairs_11to21 <span class="ot">&lt;-</span> nsw_sa2_mapping_fix <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(pop_nsw_2011 <span class="sc">%&gt;%</span> <span class="fu">select</span>(key_2011, pop_2011), <span class="at">by =</span> <span class="st">"key_2011"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    pop_nsw_2021 <span class="sc">%&gt;%</span> <span class="fu">select</span>(key_2021, sa2_name_2021, pop_2021),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"key_2021"</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_map"</span>, <span class="st">""</span>)      <span class="co"># keep authoritative column names from right table</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop_2011 =</span> <span class="fu">coalesce</span>(pop_2011, <span class="dv">0</span>),</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop_2021 =</span> <span class="fu">coalesce</span>(pop_2021, <span class="dv">0</span>),</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">contrib_2011_to_2021 =</span> pop_2011 <span class="sc">*</span> weight_2011</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    sa2_name_2011, pop_2011,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    sa2_name_2021, pop_2021,   <span class="co"># authoritative 2021 names</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    weight_2011, contrib_2011_to_2021</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Aggregate 2011 → 2021 equivalent population using authoritative 2021 names ---</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>pop11_as_21 <span class="ot">&lt;-</span> pairs_11to21 <span class="sc">%&gt;%</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sa2_name_2021) <span class="sc">%&gt;%</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">pop2011_as21 =</span> <span class="fu">sum</span>(contrib_2011_to_2021, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>I created a <code>pop2011_as21</code> variable that represents <span class="math inline">\mathrm{pop}_{2011 \rightarrow 2021}</span>. Moreover, I then combined this with geographic classifications and produced a new dataset for analysing population growth patterns.</p>
</section>
<section id="explore-population-growth-from-metropolitan-to-wslhd" class="level4">
<h4 class="anchored" data-anchor-id="explore-population-growth-from-metropolitan-to-wslhd"><strong>Explore Population Growth from Metropolitan to WSLHD</strong></h4>
<p>I developed a script based on this new population growth dataset to explore population growth patterns from the metropolitan LHDs down to WSLHD.</p>
<p>I first plotted the 2011 and 2021 populations and growth rates of the 6 metropolitan LHDs. Figure 10 shows that WSLHD had the second largest population (1.04 million) in 2021 across Metropolitan LHDs but recorded the highest growth rate (29.7%).</p>
<p><span style="font-size: 0.9rem;">Figure 10. Population by Sydney metropolitan LHDs, 2011 and 2021 Census.</span> <img src="images/metro_pop_3.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>Next, I highlighted those with population growth rates exceeding 100%, creating a clear visual contrast with the regular-growth SA2s. Figure 11 shows that SA2s with growth rates exceeding 100% were most concentrated in WSLHD, both in number and spatial clustering. These findings provide a strong entry point for my scrolltelling article: WSLHD is the metropolitan LHD with the most significant population growth, and a compelling region for deeper exploration of its internal patterns.</p>
<p><span style="font-size: 0.9rem;">Figure 11. Regular SA2s vs high-growth SA2s distribution across Sydney metropolitan LHDs.</span> <img src="images/metro_pop_5.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>I then plotted the 2011 and 2021 populations for the four LGAs within WSLHD, along with their respective growth rates. Figure 12 shows that all four LGAs showed substantial population increases over the decade, which motivated Step 3 of examining how growth differs across age groups.</p>
<p><span style="font-size: 0.9rem;">Figure 12. Population by LGAs within WSLHD, 2011 and 2021 Census.</span> <img src="images/wslhd_pop_1.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
</section>
<section id="calculate-population-growth-by-age-group" class="level4">
<h4 class="anchored" data-anchor-id="calculate-population-growth-by-age-group"><strong>Calculate Population Growth by Age Group</strong></h4>
<p>Using the cleaned age-group datasets for 2011 and 2021, I developed a script that applies the same population-growth method as before to compute SA2-level growth by age group. I also added indicators to identify whether each SA2 belonged to the metropolitan LHDs or specifically to WSLHD.</p>
<p>I saved the resulting dataset containing SA2-level population counts and growth rates for each age group.</p>
</section>
<section id="explore-population-growth-by-age-group-within-wslhd" class="level4">
<h4 class="anchored" data-anchor-id="explore-population-growth-by-age-group-within-wslhd"><strong>Explore Population Growth by Age Group within WSLHD</strong></h4>
<p>Using the saved dataset from the last step, I developed a script to explore age group population growth by LGAs within WSLHD. Figure 13 shows that across all four LGAs, the younger population increased substantially between 2011 and 2021. At the same time, all LGAs experienced rapid growth in the 60+ age group, reflecting a clear ageing trend alongside overall expansion.</p>
<p><span style="font-size: 0.9rem;">Figure 13. Age group population by LGAs within WSLHD, 2011 and 2021 Census.</span> <img src="images/wslhd_pop_2.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
</section>
</section>
<section id="cultural-diversity" class="level3">
<h3 class="anchored" data-anchor-id="cultural-diversity">Cultural Diversity</h3>
<p>Based on the findings from Stage 1 of EDA, which highlighted substantial cultural diversity within WSLHD, I conducted a more detailed analysis. Table 12 summarises tasks in cultural diversity exploration.</p>
<p><span style="font-size: 0.9rem;">Table 12. Overview of the cultural diversity exploration task.</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Task</th>
<th>Used dataset</th>
<th>Created dataset</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Re-downloaded datasets at the detail level</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/2_country_of_birth/cobDetail_raw_2021.csv"><code>cobDetail_raw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/3_language_used_at_home/langDetail_raw_2021.csv"><code>langDetail_raw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/2_country_of_birth/cobDetail_nsw_2021.csv"><code>cobDetail_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/3_language_used_at_home/langDetail_nsw_2021.csv"><code>langDetail_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/2_country_of_birth/cob2_2021.Rmd"><code>cob2_2021.Rmd</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/1_raw_data_preprocess/1_variable%20data/2021/1_demographics/3_language_used_at_home/lang2_2021.Rmd"><code>lang2_2021.Rmd</code></a></td>
</tr>
<tr class="even">
<td>Explore cultural diversity patterns</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/3_cultural_diversity/pop_size_nsw_2021.csv"><code>pop_size_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/3_cultural_diversity/cobDetail_nsw_2021.csv"><code>cobDetail_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/3_cultural_diversity/langDetail_nsw_2021.csv"><code>langDetail_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/3_cultural_diversity/sa2_lga_lhd_nsw_2021.csv"><code>sa2_lga_lhd_nsw_2021.csv</code></a><br><code>read_absmap("sa22021")</code><br><code>read_absmap("lga2021")</code></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/3_cultural_diversity/cd_nsw_2021.csv"><code>cd_nsw_2021.csv</code></a></td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/3_cultural_diversity/eda_cd.Rmd"><code>eda_cd.Rmd</code></a></td>
</tr>
</tbody>
</table>
<section id="re-downloaded-the-raw-datasets" class="level4">
<h4 class="anchored" data-anchor-id="re-downloaded-the-raw-datasets"><strong>Re-downloaded the Raw Datasets</strong></h4>
<p>I re-downloaded the country of birth and language used at home datasets from TableBuilder at a finer level of granularity, allowing deeper examination of specific countries and languages rather than grouped categories. The data cleaning procedures followed the same approach used in earlier steps on variable cleaning.</p>
</section>
<section id="explore-cultural-diversity-patterns" class="level4">
<h4 class="anchored" data-anchor-id="explore-cultural-diversity-patterns"><strong>Explore Cultural Diversity Patterns</strong></h4>
<p>After integrating these detailed datasets, I developed a script to examine cultural diversity across the six metropolitan LHDs in 2021.</p>
<p>I began by comparing each LHD’s proportions of residents born in Australia versus overseas, as well as the proportions of English-speaking and non-English-speaking residents. Figure 14 shows that WSLHD had the highest level of cultural diversity in 2021, with 47.0% of residents born overseas and 50.7% of residents speaking a non-English language at home.</p>
<p><span style="font-size: 0.9rem;">Figure 14. Distribution of country of birth and language used at home by Sydney metropolitan LHDs, 2021 Census.</span> <img src="images/metro_cd_1.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>I then identified the top ten overseas countries of birth and the non-English languages used at home. Figure 15 shows that India emerged as the leading country of birth by a substantial margin, followed by China and the Philippines. For languages, Mandarin and Arabic were the most spoken non-English languages across WSLHD.</p>
<p><span style="font-size: 0.9rem;">Figure 15. Top 10 overseas countries of birth and non-English languages used at home in WSLHD, 2021 Census.</span> <img src="images/wslhd_cd_2.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>Next, I highlighted the SA2s where the proportions of overseas-born residents and residents who speak non-English languages at home exceeded the WSLHD average, as shown in Figure 16. These two groups of SA2s displayed an almost identical spatial pattern, both clustering strongly in the southern WSLHD.</p>
<p><span style="font-size: 0.9rem;">Figure 16. SA2s where the overseas-born and non-English share exceeds WSLHD average, 2021 Census.</span> <img src="images/wslhd_cd_3.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
</section>
</section>
<section id="socioeconomics-health-profiles" class="level3">
<h3 class="anchored" data-anchor-id="socioeconomics-health-profiles">Socioeconomics and Health Profiles</h3>
<p>I developed a comprehensive script to analyse the socioeconomics and health profiles. Table 13 summarises tasks in socioeconomics and health exploration.</p>
<p><span style="font-size: 0.9rem;">Table 13. Overview of the socioeconomics and health exploration task.</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Task</th>
<th>Used dataset</th>
<th>Created dataset</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Explore socioeconomics and health profiles</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/4_sem_health/cencus_nsw_2021.csv"><code>census_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/4_sem_health/sa2_lga_lhd_nsw_2021.csv"><code>sa2_lga_lhd_nsw_2021.csv</code></a><br><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/4_sem_health/irsd_nsw_2021.csv"><code>irsd_nsw_2021.csv</code></a><br><code>read_absmap("sa22021")</code><br><code>read_absmap("lga2021")</code><br><code>read_absmap("lhd2021")</code></td>
<td>/</td>
<td><a href="https://github.com/zachary-xieluo/zachary-msc-hds-dissertation/blob/analysis/analysis/4_eda/4_sem_health/eda_sem_health.Rmd"><code>eda_sem_health.Rmd</code></a></td>
</tr>
</tbody>
</table>
<section id="explore-socioeconomic-patterns" class="level4">
<h4 class="anchored" data-anchor-id="explore-socioeconomic-patterns"><strong>Explore Socioeconomic Patterns</strong></h4>
<p>I focused on four key socioeconomic dimensions: education, occupation, personal income, and housing type. They are closely linked to daily life and are easy to interpret for audiences. Across the four socioeconomic conditions, WSLHD shows patterns broadly similar to the metropolitan average, with some minor differences, as shown in Figure 17 and Figure 18.</p>
<ul>
<li><p>Education: Among people aged 15 and over, 34.3% hold a bachelor’s degree or higher. 53.9% have qualifications below the bachelor level, a proportion slightly 0.3% lower than the metropolitan average (54.2%).</p></li>
<li><p>Occupation: Among employed people aged 15 and over, 41.6% of workers are employed in managerial or professional roles, compared with 56.3% in non-professional roles. Both indicators differ from the metropolitan distribution by roughly 3%.</p></li>
<li><p>Personal income: Among employed people aged 15 and over, 45.5% of workers earn less than the NSW median, about 2% higher than the metropolitan average (43.3%).</p></li>
<li><p>Housing type: 4.7% of occupied private dwellings in WSLHD are social housing, a modest 0.6 percentage-point increase relative to the metropolitan average (4.1%).</p></li>
</ul>
<p><span style="font-size: 0.9rem;">Figure 17. Distribution of socioeconomic characteristics in WSLHD, 2021 Census.</span> <img src="images/wslhd_sec_1.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p><span style="font-size: 0.9rem;">Figure 18. Distribution of socioeconomic characteristics in Sydney Metropolitan LHDs, 2021 Census.</span> <img src="images/metro_sec_1.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
</section>
<section id="explore-health-condition-patterns" class="level4">
<h4 class="anchored" data-anchor-id="explore-health-condition-patterns"><strong>Explore Health Condition Patterns</strong></h4>
<p>I compared WSLHD with metropolitan LHDs across various health conditions, examining differences in prevalence patterns and identifying conditions where WSLHD performed better or worse relative to the broader metropolitan region. Figure 19 shows that asthma, arthritis, and mental health conditions had the highest prevalence across all metropolitan LHDs, each exceeding 6%. WSLHD also demonstrated notable rates, with all three conditions above 5%. In addition, the prevalence of diabetes in WSLHD (5.2%) was higher than the metropolitan average (4.5%), indicating a relatively greater burden of chronic disease in WSLHD.</p>
<p><span style="font-size: 0.9rem;">Figure 19. Selected health condition proportions: Sydney Metropolitan LHDs vs WSLHD, 2021 Census.</span> <img src="images/metro_healcons_1.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
</section>
<section id="explore-the-relationship-between-socioeconomic-disadvantage-and-health-burden" class="level4">
<h4 class="anchored" data-anchor-id="explore-the-relationship-between-socioeconomic-disadvantage-and-health-burden"><strong>Explore the Relationship Between Socioeconomic Disadvantage and Health Burden</strong></h4>
<p>Given the well-established links between socioeconomic disadvantage and chronic disease, I combined these two dimensions by analysing deprivation and health burden together to examine spatial patterns in WSLHD. I need two indicators to measure deprivation and health burden, respectively.</p>
<section id="compute-deprivation-percentile" class="level5">
<h5 class="anchored" data-anchor-id="compute-deprivation-percentile"><strong>Compute Deprivation Percentile</strong></h5>
<p>IRSD is a widely used area-level index of relative disadvantage. Its percentile ranking is positively coded, meaning that higher percentile values indicate less disadvantage. So, I reversed the values by using “100 − IRSD percentile” so that higher values represent greater deprivation (higher values = worse). I refer to this reversed measure as the deprivation percentile, which is used as the deprivation indicator in the analysis.</p>
</section>
<section id="compute-health-burden-percentile" class="level5">
<h5 class="anchored" data-anchor-id="compute-health-burden-percentile"><strong>Compute Health Burden Percentile</strong></h5>
<p>For the health burden measure, I did not identify an existing standard index suitable for assessing health burden at the SA2 level. So, I constructed a health burden indicator using the prevalence of selected health conditions by SA2.</p>
<p>Based on the earlier analysis, I included the four conditions with the highest prevalence in WSLHD. Because they have a similar prevalence level (around 5–6%), and they appear more than the other conditions by at least 2%. This balance ensures that no single condition dominates or contributes negligible values to the composite index. The four conditions represent the overall health burden, while ensuring each condition contributes evenly to the composite measure.</p>
<p>My approach for measuring health burden is as follows:</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>top4_diseases <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"prop_arthritis"</span>, <span class="st">"prop_asthma"</span>, <span class="st">"prop_diabetes"</span>, <span class="st">"prop_mental_health"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>heal_burden <span class="ot">&lt;-</span> sem_wslhd_2021 <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(top4_diseases), as.numeric)) <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Standardise each disease variable (higher = worse)</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(top4_diseases), <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="fu">scale</span>(.x)), <span class="at">.names =</span> <span class="st">"{.col}_z"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Row-wise mean burden (higher = worse)</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">burden_zmean =</span> <span class="fu">rowMeans</span>(<span class="fu">across</span>(<span class="fu">ends_with</span>(<span class="st">"_z"</span>)), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Compute health burden index (high = worse)</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">health_burden_0_100      =</span> <span class="fu">rescale</span>(burden_zmean, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>)),  <span class="co"># high = better</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">health_burden_decile     =</span> <span class="fu">ntile</span>(health_burden_0_100, <span class="dv">10</span>),</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">health_burden_percentile =</span> <span class="fu">round</span>(<span class="fu">percent_rank</span>(health_burden_0_100) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">0</span>)</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Due to each condition having a different average prevalence and variability, its raw proportions are not directly comparable. To combine the four conditions into a single composite indicator, I needed to place them on a comparable scale. I used z-scores to standardise these prevalences.</p>
<p><span class="math display">
z = \frac{x - \mu}{\sigma}
</span></p>
<p>Where <span class="math inline">x</span> is the observed prevalence in each SA2, <span class="math inline">\mu</span> is the mean prevalence across all SA2s, and <span class="math inline">\sigma</span> is the standard deviation.</p>
<p>For each condition, the z-score shows how far an SA2 is above or below the average: a higher-than-average prevalence gives a positive z-score, and a lower-than-average prevalence gives a negative one. By placing all conditions on the same standardised scale, z-scores allow them to be compared fairly despite differences in their original prevalence levels.</p>
<p>I then averaged the four z-scores to create a composite burden index and rescaled it to a 0–100 scale to produce an interpretable measure. However, rescaling alone does not indicate how each SA2 compares with others. To capture the relative position of each SA2 within the full distribution, I applied the percent-rank method to transform the index into a percentile measure (health burden percentile), ranging from 0 (lowest burden) to 100 (highest burden).</p>
</section>
<section id="construct-a-bivariate-analytical-framework" class="level5">
<h5 class="anchored" data-anchor-id="construct-a-bivariate-analytical-framework"><strong>Construct a Bivariate Analytical Framework</strong></h5>
<p>Building on the previous steps, I used <code>bi_class()</code> with <code>style = "quantile"</code> and <code>dim = 3</code> to classify the deprivation percentile and health-burden percentile into tertiles (≤33rd, 34th–66th, and ≥67th percentiles), producing nine (3×3) bivariate classes. This process generated a new categorical variable <code>bi_class</code>, which labels each SA2 according to its combined class (e.g.&nbsp;1–1, 1–2, …, 3–3).</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bi_class</span>(<span class="at">x =</span> deprivation_percentile, <span class="at">y =</span> health_burden_percentile, <span class="at">style =</span> <span class="st">"quantile"</span>, <span class="at">dim =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Next, I constructed a bivariate 3×3 colour based on <code>bi_class</code>, as shown in Figure 20 (bottom left). The horizontal axis represents the deprivation percentile (from low to high, indicating increasing disadvantage), and the vertical axis represents the health burden percentile (from low to high, indicating worsening health burden). Using this 3×3 colour matrix as a legend, I then created a map and a scatter plot to explore the relationship between socioeconomic disadvantages and health burden across WSLHD.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># WGS84 (EPSG:4326) for Leaflet</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>biv_df_wgs84 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(biv_sem_health, <span class="dv">4326</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>map_lga_wslhd_2021_wgs84 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(map_lga_wslhd_2021, <span class="dv">4326</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>color_palette <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"1-1"</span> <span class="ot">=</span> <span class="st">"#d3d3d3"</span>, <span class="co"># low x, low y</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"2-1"</span> <span class="ot">=</span> <span class="st">"#ba8890"</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"3-1"</span> <span class="ot">=</span> <span class="st">"#9e3547"</span>, <span class="co"># high x, low y</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"1-2"</span> <span class="ot">=</span> <span class="st">"#8aa6c2"</span>,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"2-2"</span> <span class="ot">=</span> <span class="st">"#7a6b84"</span>, <span class="co"># medium x, medium y</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"3-2"</span> <span class="ot">=</span> <span class="st">"#682a41"</span>,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"1-3"</span> <span class="ot">=</span> <span class="st">"#4279b0"</span>, <span class="co"># low x, high y</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"2-3"</span> <span class="ot">=</span> <span class="st">"#3a4e78"</span>,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"3-3"</span> <span class="ot">=</span> <span class="st">"#311e3b"</span> <span class="co"># high x, high y</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Figure 20 shows that SA2s with both high disadvantage and high health burden were primarily concentrated in southern Blacktown, while SA2s with both low disadvantage and low health burden cluster in northern Blacktown and along the boundary shared with The Hills Shire.</p>
<p><span style="font-size: 0.9rem;">Figure 20. Socioeconomic disadvantage and health burden across SA2s in WSLHD.</span> <img src="images/wslhd_healcons_1.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>As shown in Figure 21, the x-axis represents deprivation percentile, the y-axis represents health-burden percentile, and bubble size reflects population size. Figure 21 shows that the relationship between deprivation and health burden is not strictly linear. Some low-deprivation SA2s experienced moderate to high health burden, while some highly deprived SA2s showed relatively low burden. These patterns highlight the internal diversity within WSLHD and suggest that factors beyond socioeconomic disadvantage also influence health outcomes.</p>
<p><span style="font-size: 0.9rem;">Figure 21. Socioeconomic disadvantage and health burden across SA2s in WSLHD.</span> <img src="images/wslhd_healcons_2.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
</section>
</section>
</section>
</section>
</section>
<section id="scrollytelling-techniques" class="level1">
<h1>Scrollytelling Techniques</h1>
<p>Based on the findings from EDA, I structured a storyline around three topics, framed by an introductory section at the beginning and a summary at the end. In developing the scrollytelling article, I used the following techniques to guide readers through the story.</p>
<section id="zooming-and-panning" class="level2">
<h2 class="anchored" data-anchor-id="zooming-and-panning">Zooming and Panning</h2>
<p>Zooming and panning are focus effects provided by the <code>closeread</code> package. Zooming enlarges the focal area and draws the reader’s attention to key elements. Panning is then used in combination with zooming. Once the view is zoomed in on a particular feature, panning allows the perspective to shift smoothly to another focal point. This creates a guided, exploratory visual experience that helps readers follow the storyline across multiple important locations.</p>
<p>As shown in Figure 22, I first presented a map of Sydney City. The view then zooms into the Sydney Opera House, using this familiar landmark to capture the reader’s attention. The map subsequently pulls back and shifts westward, guiding the reader toward the main character, Western Sydney. I then presented Sydney Olympic Park as a representative of Western Sydney, anchoring the narrative within the region where the subsequent story unfolds.</p>
<p><span style="font-size: 0.9rem;">Figure 22. Zooming in from the Sydney Opera House and panning into Western Sydney.</span> <img src="images/paper_p22.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>As shown in Figure 23, I first presented a 2×2 set of bar charts that show the distribution of four key socioeconomic factors in WSLHD. Different colours indicate each factor. As the scroll progresses, the view successively zooms and pans in on each factor, while the narrative text on the right explains its distribution within WSLHD. For each factor, a corresponding metropolitan average bar chart appeared in sync with the narrative, providing a broader comparative context for interpreting WSLHD’s socioeconomic characteristics.</p>
<p><span style="font-size: 0.9rem;">Figure 23. Zooming in and panning across socioeconomic factors in the narrative.</span> <img src="images/paper_p23.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
</section>
<section id="colour-pairing" class="level2">
<h2 class="anchored" data-anchor-id="colour-pairing">Colour Pairing</h2>
<p>Throughout the article, I used a warm-cool colour pairing to distinguish between two conceptually different indicators. Warm colours (e.g.&nbsp;yellow and orange) were used to highlight the primary indicator or the focal topic within each discussion section. Cool colours (e.g.&nbsp;blue and green) served as background or secondary tones, helping differentiate the other indicator while maintaining visual balance.</p>
<p>As shown in Figure 24, I used yellow and green in both the choropleth maps and accompanying narrative to distinguish high-growth SA2s and regular SA2s. I also applied the same colour scheme to the relevant text elements to maintain visual consistency and reinforce the association between the map and the narrative for the reader.</p>
<p><span style="font-size: 0.9rem;">Figure 24. Using colour to distinguish between regular SA2s and high-growth SA2s.</span> <img src="images/paper_p24.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>When introducing the cultural diversity of WSLHD, the use of colour was particularly important because multiple related yet conceptually distinct variables were presented together. As shown in Figure 25, I used orange and blue to present country distribution and yellow and green to present language distribution. I applied the same colour scheme to the narrative text and section headings to maintain visual consistency. This approach clearly distinguishes the two variables while visually linking them within the broader cultural diversity narrative.</p>
<p><span style="font-size: 0.9rem;">Figure 25. Using colour to differentiate cultural diversity indicators.</span> <img src="images/paper_p25.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
</section>
<section id="spotlight-effect" class="level2">
<h2 class="anchored" data-anchor-id="spotlight-effect">Spotlight Effect</h2>
<p>I applied the customised spotlight effects on the map to highlight key locations.</p>
<p>When introducing metropolitan LHDs, I outlined the boundaries using purple lines. I also applied a spotlight effect to illuminate only the metropolitan while dimming the surrounding regions, as shown in Figure 26 (left). Next, the spotlight gradually tightens to focus on WSLHD, while WSLHD is filled with an orange colour to emphasise its boundary within the metropolitan region, as shown in Figure 26 (right). The orange fill reinforces WSLHD as the narrative centrepiece, ensuring it stands out clearly within the larger metropolitan context.</p>
<p>The spotlight effect appears through a CSS pseudo-element layered above the map image. The full-size <code>::after</code> overlay applies a <code>radial-gradient</code> background, with the gradient centre, radius, and feathering controlled via CSS custom properties. The central region maintains its transparency, preserving full visibility of the target area, while the surrounding regions become increasingly dimmed through a semi-transparent obstruction.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode css code-with-copy"><code class="sourceCode css"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* ================= Map spotinglight ================= */</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* metro-map-2 */</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-metro-map-2</span>{</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">position</span><span class="ch">:</span> <span class="dv">relative</span><span class="op">;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="va">--x</span><span class="ch">:</span> <span class="dv">58</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="va">--y</span><span class="ch">:</span> <span class="dv">45</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="va">--r</span><span class="ch">:</span> <span class="dv">580</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="va">--feather</span><span class="ch">:</span> <span class="dv">120</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="va">--dim</span><span class="ch">:</span> <span class="fu">rgba(</span><span class="dv">30</span><span class="op">,</span><span class="dv">41</span><span class="op">,</span><span class="dv">59</span><span class="op">,</span><span class="dv">.55</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co">/* metro-map-3 */</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-metro-map-3</span>{</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="va">--x</span><span class="ch">:</span> <span class="dv">63</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  <span class="va">--y</span><span class="ch">:</span> <span class="dv">39</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  <span class="va">--r</span><span class="ch">:</span> <span class="dv">220</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  <span class="va">--feather</span><span class="ch">:</span> <span class="dv">90</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="va">--dim</span><span class="ch">:</span> <span class="fu">rgba(</span><span class="dv">30</span><span class="op">,</span><span class="dv">41</span><span class="op">,</span><span class="dv">59</span><span class="op">,</span><span class="dv">.55</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="co">/* wslhd-map-7 */</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-wslhd-map-7</span>{</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>  <span class="va">--x</span><span class="ch">:</span> <span class="dv">50</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>  <span class="va">--y</span><span class="ch">:</span> <span class="dv">70</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>  <span class="va">--r</span><span class="ch">:</span> <span class="dv">300</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>  <span class="va">--feather</span><span class="ch">:</span> <span class="dv">90</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>  <span class="va">--dim</span><span class="ch">:</span> <span class="fu">rgba(</span><span class="dv">30</span><span class="op">,</span><span class="dv">41</span><span class="op">,</span><span class="dv">59</span><span class="op">,</span><span class="dv">.55</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-metro-map-2</span><span class="op">,</span> <span class="pp">#cr-metro-map-3</span><span class="op">,</span> <span class="pp">#cr-wslhd-map-7</span>{</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>  <span class="kw">position</span><span class="ch">:</span> <span class="dv">relative</span><span class="op">;</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-metro-map-2</span> img<span class="op">,</span> <span class="pp">#cr-metro-map-3</span> img<span class="op">,</span> <span class="pp">#cr-wslhd-map-7</span> img {</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>  <span class="kw">width</span><span class="ch">:</span> <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>  <span class="kw">height</span><span class="ch">:</span> <span class="bu">auto</span><span class="op">;</span></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>  <span class="kw">display</span><span class="ch">:</span> <span class="dv">block</span><span class="op">;</span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-metro-map-2</span><span class="in">::after</span><span class="op">,</span> <span class="pp">#cr-metro-map-3</span><span class="in">::after</span><span class="op">,</span> <span class="pp">#cr-wslhd-map-7</span><span class="in">::after</span> {</span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>  <span class="kw">content</span><span class="ch">:</span> <span class="st">""</span><span class="op">;</span></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>  <span class="kw">position</span><span class="ch">:</span> <span class="dv">absolute</span><span class="op">;</span></span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>  <span class="kw">inset</span><span class="ch">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>  <span class="kw">pointer-events</span><span class="ch">:</span> <span class="dv">none</span><span class="op">;</span></span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>  <span class="kw">z-index</span><span class="ch">:</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background</span><span class="ch">:</span></span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">radial-gradient(</span></span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>      <span class="dv">circle</span> <span class="dv">at </span><span class="fu">var(</span><span class="va">--x</span><span class="fu">)</span> <span class="fu">var(</span><span class="va">--y</span><span class="fu">)</span><span class="op">,</span></span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a>      <span class="dv">transparent</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>      <span class="dv">transparent</span> <span class="fu">calc(var(</span><span class="va">--r</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--feather</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">.20</span><span class="fu">)</span> <span class="fu">calc(var(</span><span class="va">--r</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--feather</span><span class="fu">)</span> <span class="op">+</span> <span class="dv">1</span><span class="dt">px</span><span class="fu">)</span><span class="op">,</span></span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a>      <span class="fu">var(</span><span class="va">--dim</span><span class="fu">)</span> <span class="fu">var(</span><span class="va">--r</span><span class="fu">)</span></span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">)</span><span class="op">;</span></span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<style type="text/css">
/* ================= Map spotinglight ================= */

/* metro-map-2 */
#cr-metro-map-2{
  position: relative;
  --x: 58%;
  --y: 45%;
  --r: 580px;
  --feather: 120px;
  --dim: rgba(30,41,59,.55);
}

/* metro-map-3 */
#cr-metro-map-3{
  --x: 63%;
  --y: 39%;
  --r: 220px;
  --feather: 90px;
  --dim: rgba(30,41,59,.55);
}

/* wslhd-map-7 */
#cr-wslhd-map-7{
  --x: 50%;
  --y: 70%;
  --r: 300px;
  --feather: 90px;
  --dim: rgba(30,41,59,.55);
}

#cr-metro-map-2, #cr-metro-map-3, #cr-wslhd-map-7{
  position: relative;
}

#cr-metro-map-2 img, #cr-metro-map-3 img, #cr-wslhd-map-7 img {
  width: 100%;
  height: auto;
  display: block;
}

#cr-metro-map-2::after, #cr-metro-map-3::after, #cr-wslhd-map-7::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  background:
    radial-gradient(
      circle at var(--x) var(--y),
      transparent 0,
      transparent calc(var(--r) - var(--feather)),
      rgba(0,0,0,.20) calc(var(--r) - var(--feather) + 1px),
      var(--dim) var(--r)
    );
}
</style>
</div>
<p><span style="font-size: 0.9rem;">Figure 26. Sydney metropolitan map with the spotlight effect.</span> <img src="images/paper_p26.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>Additionally, I applied the spotlight together with the zooming and panning effectto present the healthcare network at WSLHD. As shown in Figure 27, the sequence begins with a WSLHD map featuring a spotlight focused on five red cross icons representing the public hospitals. The view then shows each hospital in sequence while it zooms in and pans through the scene with hospital names displayed in an overlay text panel. This combination of effects provides the reader with a more immersive and engaging exploratory experience.</p>
<p><span style="font-size: 0.9rem;">Figure 27. WSLHD map with the spotlight effect.</span> <img src="images/paper_p27.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
</section>
<section id="semi-transparent-effect" class="level2">
<h2 class="anchored" data-anchor-id="semi-transparent-effect">Semi-transparent Effect</h2>
<p>When introducing the multiple bar charts, I applied a custom semi-transparency effect to distinguish the focal variable.</p>
<p>The semi-transparent technique is similar to the spotlight effect described above. A vertical “light beam” is used to cover the variable group under discussion, while parallel horizontal beams highlight the corresponding legend and title. All other surrounding regions are progressively whitened using a semi-transparent overlay. The gradient centre, radius, and feathering are controlled via CSS custom properties.</p>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode css code-with-copy"><code class="sourceCode css"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* ================= Transparent effect for barcharts ================= */</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* ===============================</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">   cr-wslhd-pop-2: Beam parameters (per image)</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">   =============================== */</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* cr-wslhd-pop-2-1 */</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-wslhd-pop-2-1</span>{</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* vertical beams */</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="va">--x1</span><span class="ch">:</span> <span class="dv">26</span><span class="dt">%</span><span class="op">;</span> <span class="va">--w1</span><span class="ch">:</span> <span class="dv">9</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="va">--x2</span><span class="ch">:</span> <span class="dv">72</span><span class="dt">%</span><span class="op">;</span> <span class="va">--w2</span><span class="ch">:</span> <span class="dv">9</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="va">--f</span> <span class="ch">:</span> <span class="dv">2</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* horizontal beams */</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="va">--y1</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">%</span><span class="op">;</span>  <span class="va">--wy1</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="va">--y2</span><span class="ch">:</span> <span class="dv">50</span><span class="dt">%</span><span class="op">;</span>  <span class="va">--wy2</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="va">--y3</span><span class="ch">:</span> <span class="dv">99</span><span class="dt">%</span><span class="op">;</span>  <span class="va">--wy3</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="va">--fy</span><span class="ch">:</span> <span class="dv">2</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* outside opacity (smaller = more transparent) */</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  <span class="va">--alpha-out</span><span class="ch">:</span> <span class="dv">.25</span><span class="op">;</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="co">/* cr-wslhd-pop-2-2 */</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-wslhd-pop-2-2</span>{</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* vertical beams */</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>  <span class="va">--x1</span><span class="ch">:</span> <span class="dv">20</span><span class="dt">%</span><span class="op">;</span> <span class="va">--w1</span><span class="ch">:</span> <span class="dv">19</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>  <span class="va">--x2</span><span class="ch">:</span> <span class="dv">65</span><span class="dt">%</span><span class="op">;</span> <span class="va">--w2</span><span class="ch">:</span> <span class="dv">19</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>  <span class="va">--f</span> <span class="ch">:</span> <span class="dv">2</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* horizontal beams */</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>  <span class="va">--y1</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">%</span><span class="op">;</span>  <span class="va">--wy1</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>  <span class="va">--y2</span><span class="ch">:</span> <span class="dv">50</span><span class="dt">%</span><span class="op">;</span>  <span class="va">--wy2</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>  <span class="va">--y3</span><span class="ch">:</span> <span class="dv">99</span><span class="dt">%</span><span class="op">;</span>  <span class="va">--wy3</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>  <span class="va">--fy</span><span class="ch">:</span> <span class="dv">2</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>  <span class="va">--alpha-out</span><span class="ch">:</span> <span class="dv">.25</span><span class="op">;</span></span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a><span class="co">/* cr-wslhd-pop-2-3 */</span></span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-wslhd-pop-2-3</span>{</span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* vertical beams */</span></span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a>  <span class="va">--x1</span><span class="ch">:</span> <span class="dv">48</span><span class="dt">%</span><span class="op">;</span> <span class="va">--w1</span><span class="ch">:</span> <span class="dv">9</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a>  <span class="va">--x2</span><span class="ch">:</span> <span class="dv">94</span><span class="dt">%</span><span class="op">;</span> <span class="va">--w2</span><span class="ch">:</span> <span class="dv">9</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a>  <span class="va">--f</span> <span class="ch">:</span> <span class="dv">2</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* horizontal beams */</span></span>
<span id="cb13-54"><a href="#cb13-54" aria-hidden="true" tabindex="-1"></a>  <span class="va">--y1</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">%</span><span class="op">;</span>  <span class="va">--wy1</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-55"><a href="#cb13-55" aria-hidden="true" tabindex="-1"></a>  <span class="va">--y2</span><span class="ch">:</span> <span class="dv">50</span><span class="dt">%</span><span class="op">;</span>  <span class="va">--wy2</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-56"><a href="#cb13-56" aria-hidden="true" tabindex="-1"></a>  <span class="va">--y3</span><span class="ch">:</span> <span class="dv">99</span><span class="dt">%</span><span class="op">;</span>  <span class="va">--wy3</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-57"><a href="#cb13-57" aria-hidden="true" tabindex="-1"></a>  <span class="va">--fy</span><span class="ch">:</span> <span class="dv">2</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-58"><a href="#cb13-58" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-59"><a href="#cb13-59" aria-hidden="true" tabindex="-1"></a>  <span class="va">--alpha-out</span><span class="ch">:</span> <span class="dv">.25</span><span class="op">;</span></span>
<span id="cb13-60"><a href="#cb13-60" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-61"><a href="#cb13-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-62"><a href="#cb13-62" aria-hidden="true" tabindex="-1"></a><span class="co">/* ===============================</span></span>
<span id="cb13-63"><a href="#cb13-63" aria-hidden="true" tabindex="-1"></a><span class="co">   Shared container &amp; computed vars</span></span>
<span id="cb13-64"><a href="#cb13-64" aria-hidden="true" tabindex="-1"></a><span class="co">   =============================== */</span></span>
<span id="cb13-65"><a href="#cb13-65" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb13-66"><a href="#cb13-66" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-wslhd-pop-2-1</span><span class="op">,</span></span>
<span id="cb13-67"><a href="#cb13-67" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-wslhd-pop-2-2</span><span class="op">,</span></span>
<span id="cb13-68"><a href="#cb13-68" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-wslhd-pop-2-3</span>{</span>
<span id="cb13-69"><a href="#cb13-69" aria-hidden="true" tabindex="-1"></a>  <span class="kw">position</span><span class="ch">:</span> <span class="dv">relative</span><span class="op">;</span></span>
<span id="cb13-70"><a href="#cb13-70" aria-hidden="true" tabindex="-1"></a>  <span class="kw">display</span><span class="ch">:</span> <span class="dv">block</span><span class="op">;</span></span>
<span id="cb13-71"><a href="#cb13-71" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* half widths/heights for math */</span></span>
<span id="cb13-72"><a href="#cb13-72" aria-hidden="true" tabindex="-1"></a>  <span class="va">--h1</span><span class="ch">:</span>  <span class="fu">calc(var(</span><span class="va">--w1</span><span class="fu">)</span>  <span class="op">/</span> <span class="dv">2</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb13-73"><a href="#cb13-73" aria-hidden="true" tabindex="-1"></a>  <span class="va">--h2</span><span class="ch">:</span>  <span class="fu">calc(var(</span><span class="va">--w2</span><span class="fu">)</span>  <span class="op">/</span> <span class="dv">2</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb13-74"><a href="#cb13-74" aria-hidden="true" tabindex="-1"></a>  <span class="va">--hy1</span><span class="ch">:</span> <span class="fu">calc(var(</span><span class="va">--wy1</span><span class="fu">)</span> <span class="op">/</span> <span class="dv">2</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb13-75"><a href="#cb13-75" aria-hidden="true" tabindex="-1"></a>  <span class="va">--hy2</span><span class="ch">:</span> <span class="fu">calc(var(</span><span class="va">--wy2</span><span class="fu">)</span> <span class="op">/</span> <span class="dv">2</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb13-76"><a href="#cb13-76" aria-hidden="true" tabindex="-1"></a>  <span class="va">--hy3</span><span class="ch">:</span> <span class="fu">calc(var(</span><span class="va">--wy3</span><span class="fu">)</span> <span class="op">/</span> <span class="dv">2</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb13-77"><a href="#cb13-77" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-78"><a href="#cb13-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-79"><a href="#cb13-79" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-wslhd-pop-2-1</span> img<span class="op">,</span></span>
<span id="cb13-80"><a href="#cb13-80" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-wslhd-pop-2-2</span> img<span class="op">,</span></span>
<span id="cb13-81"><a href="#cb13-81" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-wslhd-pop-2-3</span> img{</span>
<span id="cb13-82"><a href="#cb13-82" aria-hidden="true" tabindex="-1"></a>  <span class="kw">width</span><span class="ch">:</span> <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb13-83"><a href="#cb13-83" aria-hidden="true" tabindex="-1"></a>  <span class="kw">height</span><span class="ch">:</span> <span class="bu">auto</span><span class="op">;</span></span>
<span id="cb13-84"><a href="#cb13-84" aria-hidden="true" tabindex="-1"></a>  <span class="kw">display</span><span class="ch">:</span> <span class="dv">block</span><span class="op">;</span></span>
<span id="cb13-85"><a href="#cb13-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-86"><a href="#cb13-86" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* Two-layer mask: vertical (left→right) + horizontal (top→bottom).</span></span>
<span id="cb13-87"><a href="#cb13-87" aria-hidden="true" tabindex="-1"></a><span class="co">     The union is the default; no need for mask-composite. */</span></span>
<span id="cb13-88"><a href="#cb13-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-89"><a href="#cb13-89" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* WebKit/Safari */</span></span>
<span id="cb13-90"><a href="#cb13-90" aria-hidden="true" tabindex="-1"></a>  <span class="kw">-webkit-mask-image</span><span class="ch">:</span></span>
<span id="cb13-91"><a href="#cb13-91" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* vertical layer */</span></span>
<span id="cb13-92"><a href="#cb13-92" aria-hidden="true" tabindex="-1"></a>    <span class="fu">linear-gradient(</span><span class="dv">to right</span><span class="op">,</span></span>
<span id="cb13-93"><a href="#cb13-93" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb13-94"><a href="#cb13-94" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span> <span class="fu">calc(var(</span><span class="va">--x1</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--h1</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--f</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-95"><a href="#cb13-95" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--x1</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--h1</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-96"><a href="#cb13-96" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--x1</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--h1</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-97"><a href="#cb13-97" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="fu">calc(var(</span><span class="va">--x1</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--h1</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--f</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-98"><a href="#cb13-98" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="fu">calc(var(</span><span class="va">--x2</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--h2</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--f</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-99"><a href="#cb13-99" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--x2</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--h2</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-100"><a href="#cb13-100" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--x2</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--h2</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-101"><a href="#cb13-101" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="fu">calc(var(</span><span class="va">--x2</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--h2</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--f</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-102"><a href="#cb13-102" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="dv">100</span><span class="dt">%</span></span>
<span id="cb13-103"><a href="#cb13-103" aria-hidden="true" tabindex="-1"></a>    <span class="fu">)</span><span class="op">,</span></span>
<span id="cb13-104"><a href="#cb13-104" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* horizontal layer: y1 + y2 + y3 */</span></span>
<span id="cb13-105"><a href="#cb13-105" aria-hidden="true" tabindex="-1"></a>    <span class="fu">linear-gradient(</span><span class="dv">to bottom</span><span class="op">,</span></span>
<span id="cb13-106"><a href="#cb13-106" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-107"><a href="#cb13-107" aria-hidden="true" tabindex="-1"></a>      <span class="co">/* y1 window */</span></span>
<span id="cb13-108"><a href="#cb13-108" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb13-109"><a href="#cb13-109" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span> <span class="fu">calc(var(</span><span class="va">--y1</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--hy1</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--fy</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-110"><a href="#cb13-110" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--y1</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--hy1</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-111"><a href="#cb13-111" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--y1</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--hy1</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-112"><a href="#cb13-112" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="fu">calc(var(</span><span class="va">--y1</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--hy1</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--fy</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-113"><a href="#cb13-113" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb13-114"><a href="#cb13-114" aria-hidden="true" tabindex="-1"></a>      <span class="co">/* y2 window */</span></span>
<span id="cb13-115"><a href="#cb13-115" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="fu">calc(var(</span><span class="va">--y2</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--hy2</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--fy</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-116"><a href="#cb13-116" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--y2</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--hy2</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-117"><a href="#cb13-117" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--y2</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--hy2</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-118"><a href="#cb13-118" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="fu">calc(var(</span><span class="va">--y2</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--hy2</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--fy</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-119"><a href="#cb13-119" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb13-120"><a href="#cb13-120" aria-hidden="true" tabindex="-1"></a>      <span class="co">/* y3 window*/</span></span>
<span id="cb13-121"><a href="#cb13-121" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="fu">calc(var(</span><span class="va">--y3</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--hy3</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--fy3</span><span class="op">,</span> <span class="fu">var(</span><span class="va">--fy</span><span class="fu">)))</span><span class="op">,</span></span>
<span id="cb13-122"><a href="#cb13-122" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--y3</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--hy3</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-123"><a href="#cb13-123" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--y3</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--hy3</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-124"><a href="#cb13-124" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="fu">calc(var(</span><span class="va">--y3</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--hy3</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--fy3</span><span class="op">,</span> <span class="fu">var(</span><span class="va">--fy</span><span class="fu">)))</span><span class="op">,</span></span>
<span id="cb13-125"><a href="#cb13-125" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="dv">100</span><span class="dt">%</span></span>
<span id="cb13-126"><a href="#cb13-126" aria-hidden="true" tabindex="-1"></a>    <span class="fu">)</span><span class="op">;</span></span>
<span id="cb13-127"><a href="#cb13-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-128"><a href="#cb13-128" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* Standard */</span></span>
<span id="cb13-129"><a href="#cb13-129" aria-hidden="true" tabindex="-1"></a>  <span class="kw">mask-image</span><span class="ch">:</span></span>
<span id="cb13-130"><a href="#cb13-130" aria-hidden="true" tabindex="-1"></a>    <span class="fu">linear-gradient(</span><span class="dv">to right</span><span class="op">,</span></span>
<span id="cb13-131"><a href="#cb13-131" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb13-132"><a href="#cb13-132" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span> <span class="fu">calc(var(</span><span class="va">--x1</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--h1</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--f</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-133"><a href="#cb13-133" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--x1</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--h1</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-134"><a href="#cb13-134" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--x1</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--h1</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-135"><a href="#cb13-135" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="fu">calc(var(</span><span class="va">--x1</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--h1</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--f</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-136"><a href="#cb13-136" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="fu">calc(var(</span><span class="va">--x2</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--h2</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--f</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-137"><a href="#cb13-137" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--x2</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--h2</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-138"><a href="#cb13-138" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--x2</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--h2</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-139"><a href="#cb13-139" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="fu">calc(var(</span><span class="va">--x2</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--h2</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--f</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-140"><a href="#cb13-140" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="dv">100</span><span class="dt">%</span></span>
<span id="cb13-141"><a href="#cb13-141" aria-hidden="true" tabindex="-1"></a>    <span class="fu">)</span><span class="op">,</span></span>
<span id="cb13-142"><a href="#cb13-142" aria-hidden="true" tabindex="-1"></a>    <span class="fu">linear-gradient(</span><span class="dv">to bottom</span><span class="op">,</span></span>
<span id="cb13-143"><a href="#cb13-143" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-144"><a href="#cb13-144" aria-hidden="true" tabindex="-1"></a>      <span class="co">/* y1 window */</span></span>
<span id="cb13-145"><a href="#cb13-145" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb13-146"><a href="#cb13-146" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span> <span class="fu">calc(var(</span><span class="va">--y1</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--hy1</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--fy</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-147"><a href="#cb13-147" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--y1</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--hy1</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-148"><a href="#cb13-148" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--y1</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--hy1</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-149"><a href="#cb13-149" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="fu">calc(var(</span><span class="va">--y1</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--hy1</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--fy</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-150"><a href="#cb13-150" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb13-151"><a href="#cb13-151" aria-hidden="true" tabindex="-1"></a>      <span class="co">/* y2 window */</span></span>
<span id="cb13-152"><a href="#cb13-152" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="fu">calc(var(</span><span class="va">--y2</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--hy2</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--fy</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-153"><a href="#cb13-153" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--y2</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--hy2</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-154"><a href="#cb13-154" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--y2</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--hy2</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-155"><a href="#cb13-155" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="fu">calc(var(</span><span class="va">--y2</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--hy2</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--fy</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-156"><a href="#cb13-156" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb13-157"><a href="#cb13-157" aria-hidden="true" tabindex="-1"></a>      <span class="co">/* y3 window*/</span></span>
<span id="cb13-158"><a href="#cb13-158" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="fu">calc(var(</span><span class="va">--y3</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--hy3</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--fy3</span><span class="op">,</span> <span class="fu">var(</span><span class="va">--fy</span><span class="fu">)))</span><span class="op">,</span></span>
<span id="cb13-159"><a href="#cb13-159" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--y3</span><span class="fu">)</span> <span class="op">-</span> <span class="fu">var(</span><span class="va">--hy3</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-160"><a href="#cb13-160" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="fu">)</span>                 <span class="fu">calc(var(</span><span class="va">--y3</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--hy3</span><span class="fu">))</span><span class="op">,</span></span>
<span id="cb13-161"><a href="#cb13-161" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="fu">calc(var(</span><span class="va">--y3</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--hy3</span><span class="fu">)</span> <span class="op">+</span> <span class="fu">var(</span><span class="va">--fy3</span><span class="op">,</span> <span class="fu">var(</span><span class="va">--fy</span><span class="fu">)))</span><span class="op">,</span></span>
<span id="cb13-162"><a href="#cb13-162" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rgba(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="fu">var(</span><span class="va">--alpha-out</span><span class="fu">))</span>  <span class="dv">100</span><span class="dt">%</span></span>
<span id="cb13-163"><a href="#cb13-163" aria-hidden="true" tabindex="-1"></a>    <span class="fu">)</span><span class="op">;</span></span>
<span id="cb13-164"><a href="#cb13-164" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-165"><a href="#cb13-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-166"><a href="#cb13-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-167"><a href="#cb13-167" aria-hidden="true" tabindex="-1"></a><span class="co">/* ensure any old ::after overlays are disabled */</span></span>
<span id="cb13-168"><a href="#cb13-168" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-wslhd-pop-2-1</span><span class="in">::after</span><span class="op">,</span></span>
<span id="cb13-169"><a href="#cb13-169" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-wslhd-pop-2-2</span><span class="in">::after</span><span class="op">,</span></span>
<span id="cb13-170"><a href="#cb13-170" aria-hidden="true" tabindex="-1"></a><span class="pp">#cr-wslhd-pop-2-3</span><span class="in">::after</span>{</span>
<span id="cb13-171"><a href="#cb13-171" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background</span><span class="ch">:</span> <span class="dv">none</span> <span class="at">!important</span><span class="op">;</span></span>
<span id="cb13-172"><a href="#cb13-172" aria-hidden="true" tabindex="-1"></a>  <span class="kw">content</span><span class="ch">:</span> <span class="dv">none</span><span class="op">;</span></span>
<span id="cb13-173"><a href="#cb13-173" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<style type="text/css">
/* ================= Transparent effect for barcharts ================= */

/* ===============================
   cr-wslhd-pop-2: Beam parameters (per image)
   =============================== */

/* cr-wslhd-pop-2-1 */

#cr-wslhd-pop-2-1{

  /* vertical beams */
  --x1: 26%; --w1: 9%;
  --x2: 72%; --w2: 9%;
  --f : 2%;
  
  /* horizontal beams */
  --y1: 5%;  --wy1: 5%;
  --y2: 50%;  --wy2: 5%;
  --y3: 99%;  --wy3: 5%;
  --fy: 2%;
  
  /* outside opacity (smaller = more transparent) */
  --alpha-out: .25;
}

/* cr-wslhd-pop-2-2 */

#cr-wslhd-pop-2-2{

  /* vertical beams */
  --x1: 20%; --w1: 19%;
  --x2: 65%; --w2: 19%;
  --f : 2%;
  
  /* horizontal beams */
  --y1: 5%;  --wy1: 5%;
  --y2: 50%;  --wy2: 5%;
  --y3: 99%;  --wy3: 5%;
  --fy: 2%;
  
  --alpha-out: .25;
}

/* cr-wslhd-pop-2-3 */

#cr-wslhd-pop-2-3{

  /* vertical beams */
  --x1: 48%; --w1: 9%;
  --x2: 94%; --w2: 9%;
  --f : 2%;
  
  /* horizontal beams */
  --y1: 5%;  --wy1: 5%;
  --y2: 50%;  --wy2: 5%;
  --y3: 99%;  --wy3: 5%;
  --fy: 2%;
  
  --alpha-out: .25;
}

/* ===============================
   Shared container & computed vars
   =============================== */
   
#cr-wslhd-pop-2-1,
#cr-wslhd-pop-2-2,
#cr-wslhd-pop-2-3{
  position: relative;
  display: block;
  /* half widths/heights for math */
  --h1:  calc(var(--w1)  / 2);
  --h2:  calc(var(--w2)  / 2);
  --hy1: calc(var(--wy1) / 2);
  --hy2: calc(var(--wy2) / 2);
  --hy3: calc(var(--wy3) / 2);
}

#cr-wslhd-pop-2-1 img,
#cr-wslhd-pop-2-2 img,
#cr-wslhd-pop-2-3 img{
  width: 100%;
  height: auto;
  display: block;

  /* Two-layer mask: vertical (left→right) + horizontal (top→bottom).
     The union is the default; no need for mask-composite. */

  /* WebKit/Safari */
  -webkit-mask-image:
    /* vertical layer */
    linear-gradient(to right,
      rgba(0,0,0,var(--alpha-out)) 0,
      rgba(0,0,0,var(--alpha-out)) calc(var(--x1) - var(--h1) - var(--f)),
      rgba(0,0,0,1)                 calc(var(--x1) - var(--h1)),
      rgba(0,0,0,1)                 calc(var(--x1) + var(--h1)),
      rgba(0,0,0,var(--alpha-out))  calc(var(--x1) + var(--h1) + var(--f)),
      rgba(0,0,0,var(--alpha-out))  calc(var(--x2) - var(--h2) - var(--f)),
      rgba(0,0,0,1)                 calc(var(--x2) - var(--h2)),
      rgba(0,0,0,1)                 calc(var(--x2) + var(--h2)),
      rgba(0,0,0,var(--alpha-out))  calc(var(--x2) + var(--h2) + var(--f)),
      rgba(0,0,0,var(--alpha-out))  100%
    ),
    /* horizontal layer: y1 + y2 + y3 */
    linear-gradient(to bottom,
    
      /* y1 window */
      rgba(0,0,0,var(--alpha-out)) 0,
      rgba(0,0,0,var(--alpha-out)) calc(var(--y1) - var(--hy1) - var(--fy)),
      rgba(0,0,0,1)                 calc(var(--y1) - var(--hy1)),
      rgba(0,0,0,1)                 calc(var(--y1) + var(--hy1)),
      rgba(0,0,0,var(--alpha-out))  calc(var(--y1) + var(--hy1) + var(--fy)),
      
      /* y2 window */
      rgba(0,0,0,var(--alpha-out))  calc(var(--y2) - var(--hy2) - var(--fy)),
      rgba(0,0,0,1)                 calc(var(--y2) - var(--hy2)),
      rgba(0,0,0,1)                 calc(var(--y2) + var(--hy2)),
      rgba(0,0,0,var(--alpha-out))  calc(var(--y2) + var(--hy2) + var(--fy)),
      
      /* y3 window*/
      rgba(0,0,0,var(--alpha-out))  calc(var(--y3) - var(--hy3) - var(--fy3, var(--fy))),
      rgba(0,0,0,1)                 calc(var(--y3) - var(--hy3)),
      rgba(0,0,0,1)                 calc(var(--y3) + var(--hy3)),
      rgba(0,0,0,var(--alpha-out))  calc(var(--y3) + var(--hy3) + var(--fy3, var(--fy))),
      rgba(0,0,0,var(--alpha-out))  100%
    );

  /* Standard */
  mask-image:
    linear-gradient(to right,
      rgba(0,0,0,var(--alpha-out)) 0,
      rgba(0,0,0,var(--alpha-out)) calc(var(--x1) - var(--h1) - var(--f)),
      rgba(0,0,0,1)                 calc(var(--x1) - var(--h1)),
      rgba(0,0,0,1)                 calc(var(--x1) + var(--h1)),
      rgba(0,0,0,var(--alpha-out))  calc(var(--x1) + var(--h1) + var(--f)),
      rgba(0,0,0,var(--alpha-out))  calc(var(--x2) - var(--h2) - var(--f)),
      rgba(0,0,0,1)                 calc(var(--x2) - var(--h2)),
      rgba(0,0,0,1)                 calc(var(--x2) + var(--h2)),
      rgba(0,0,0,var(--alpha-out))  calc(var(--x2) + var(--h2) + var(--f)),
      rgba(0,0,0,var(--alpha-out))  100%
    ),
    linear-gradient(to bottom,
    
      /* y1 window */
      rgba(0,0,0,var(--alpha-out)) 0,
      rgba(0,0,0,var(--alpha-out)) calc(var(--y1) - var(--hy1) - var(--fy)),
      rgba(0,0,0,1)                 calc(var(--y1) - var(--hy1)),
      rgba(0,0,0,1)                 calc(var(--y1) + var(--hy1)),
      rgba(0,0,0,var(--alpha-out))  calc(var(--y1) + var(--hy1) + var(--fy)),
      
      /* y2 window */
      rgba(0,0,0,var(--alpha-out))  calc(var(--y2) - var(--hy2) - var(--fy)),
      rgba(0,0,0,1)                 calc(var(--y2) - var(--hy2)),
      rgba(0,0,0,1)                 calc(var(--y2) + var(--hy2)),
      rgba(0,0,0,var(--alpha-out))  calc(var(--y2) + var(--hy2) + var(--fy)),
      
      /* y3 window*/
      rgba(0,0,0,var(--alpha-out))  calc(var(--y3) - var(--hy3) - var(--fy3, var(--fy))),
      rgba(0,0,0,1)                 calc(var(--y3) - var(--hy3)),
      rgba(0,0,0,1)                 calc(var(--y3) + var(--hy3)),
      rgba(0,0,0,var(--alpha-out))  calc(var(--y3) + var(--hy3) + var(--fy3, var(--fy))),
      rgba(0,0,0,var(--alpha-out))  100%
    );
}


/* ensure any old ::after overlays are disabled */
#cr-wslhd-pop-2-1::after,
#cr-wslhd-pop-2-2::after,
#cr-wslhd-pop-2-3::after{
  background: none !important;
  content: none;
}
</style>
</div>
<p>For instance, when discussing young adults, only that group, the title and legend remain fully visible, while the other groups become partially transparent, as shown in Figure 28.</p>
<p><span style="font-size: 0.9rem;">Figure 28. Age-group bar charts with the semi-transparent effect.</span> <img src="images/paper_p28.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>Similarly, when discussing health conditions, only four conditions with the highest prevalence remain fully visible, while the remaining conditions are partially transparent, as shown in Figure 29.</p>
<p><span style="font-size: 0.9rem;">Figure 29. Health condition bar charts with the semi-transparent effect.</span> <img src="images/paper_p29.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
</section>
<section id="interactivity" class="level2">
<h2 class="anchored" data-anchor-id="interactivity">Interactivity</h2>
<p>At the end of each section, I used <code>leaflet</code> package to create interactive maps that summarise the relevant variables across all SA2s within WSLHD.</p>
<p>For instance, in the population growth section, I created an interactive map summarising the population growth, as shown in Figure 30. Click on an SA2 reveals a hover panel that shows the SA2, LGA, 2021 population, 2011 population, absolute population change, and growth rate. I designed a gradient colour scale that represents growth rates from 0% to 100%, while SA2s with negative growth or growth exceeding 100% are highlighted with additional colours to draw attention to these outliers.</p>
<p><span style="font-size: 0.9rem;">Figure 30. Example of the population growth interactive map.</span> <img src="images/paper_p30.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>In the cultural diversity section, I created two interactive maps to summarise cultural diversity within WSLHD, as shown in Figure 31. The two maps display the country of birth and languages used at home, respectively. Clicking on an SA2 reveals a hover panel showing information. The two maps are presented under two colour-coded tab panels to distinguish between the themes clearly. I also applied separate gradient legends: one based on the overseas-born proportion and the other on the non-English proportion, allowing readers to explore each pattern intuitively.</p>
<p><span style="font-size: 0.9rem;">Figure 31. Example of cultural diversity interactive maps.</span> <img src="images/paper_p31.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>Using the 3×3 colour grid from EDA, I then created an interactive SA2-level map for WSLHD, as shown in Figure 32. This map enables readers to examine the spatial distribution of socioeconomic disadvantages and health burden across WSLHD. Clicking a SA2 reveals a hover panel displaying its geographic information, proportions of selected health conditions, and its deprivation and health-burden percentile groups.</p>
<p><span style="font-size: 0.9rem;">Figure 32. Example of socioeconomic disadvantages and health burden interactive map.</span> <img src="images/paper_p32.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>I also applied the same bivariate colour grid to produce an interactive scatter plot through the <code>plotly</code> package, as shown in Figure 33. This visualisation provides a clear and intuitive distribution-level perspective, allowing readers to see how SA2s are clustered across the combined socioeconomic–health spectrum.</p>
<p><span style="font-size: 0.9rem;">Figure 33. Example of socioeconomic disadvantages and health burden interactive scatter plot.</span> <img src="images/paper_p33.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
<p>I separated the interactive map and the scatter plot into two-tab panels to enhance the user experience.</p>
<p>I also compiled all interactive figures into a separate dashboard page that users can access through the navigation bar at the top, as shown in Figure 34. The dashboard contains three-tab panels that organise the content into three sections aligned with the story. The design structure allows users to explore different content areas while maintaining the story page as a linear storytelling experience.</p>
<p><span style="font-size: 0.9rem;">Figure 34. Dashboard user interface.</span> <img src="images/paper_p34.png" class="img-fluid" style="width:100%; height:100%; object-fit:contain; border:1px solid #000"></p>
</section>
</section>
<section id="deployment" class="level1">
<h1>Deployment</h1>
<p>The project was compiled and deployed as a Quarto website that contains three components: a scrollytelling article, an interactive dashboard, and a technical paper. All components are underpinned by a central GitHub codebase, which manages source code, data processing scripts, and site configuration to ensure reproducibility and transparency.</p>
<p>The data analysis workflow was separated into a dedicated Git branch named “analysis”, which protects the main website from disruptions while maintaining the data processing system. This branch contains all datasets, analysis scripts and derived outputs used in developing the scrollytelling article.</p>
</section>
<section id="references" class="level1">
<h1>References</h1>
<p><span style="font-size: 0.9rem;">[1] NSW Ministry of Health. Local health districts and specialty networks [Internet]. Sydney: NSW Government; [cited 2025 November 17]. Available from: <a href="https://www.health.nsw.gov.au/lhd/Pages/default.aspx">https://www.health.nsw.gov.au/lhd/Pages/default.aspx</a></span></p>
<p><span style="font-size: 0.9rem;">[2] Western Sydney Local Health District. About us [Internet]. Sydney: NSW Government; [cited 2025 November 17]. Available from: <a href="https://www.wslhd.health.nsw.gov.au/About-Us">https://www.wslhd.health.nsw.gov.au/About-Us</a></span></p>
<p><span style="font-size: 0.9rem;">[3] Western Sydney Local Health District. Social health atlas [Internet]. Sydney: NSW Government; [cited 2025 November 17]. Available from: <a href="https://www.wslhd.health.nsw.gov.au/SocialHealthAtlas/">https://www.wslhd.health.nsw.gov.au/SocialHealthAtlas/</a></span></p>
<p><span style="font-size: 0.9rem;">[4] Schröder K, Eberhardt W, Belavadi P, Ajdadilish B, Van Haften N, Overes E, et al.&nbsp;Telling stories with data—a systematic review [Internet]. arXiv; 2023 [cited 2025 November 17]. Available from: <a href="https://arxiv.org/abs/2312.01164">https://arxiv.org/abs/2312.01164</a></span></p>
<p><span style="font-size: 0.9rem;">[5] Segel E, Heer J. Narrative visualization: telling stories with data. IEEE Trans Vis Comput Graph. 2010;16(6):1139–48. Available from: <a href="http://vis.stanford.edu/files/2010-Narrative-InfoVis.pdf">http://vis.stanford.edu/files/2010-Narrative-InfoVis.pdf</a></span></p>
<p><span style="font-size: 0.9rem;">[6] Seyser D, Zeiller M. Scrollytelling: an analysis of visual storytelling in online journalism. In: 2018 22nd International Conference on Information Visualisation (IV). Los Alamitos (CA): IEEE; 2018. p.&nbsp;401–6. Available from: <a href="https://sci-hub.se/10.1109/iV.2018.00075">https://sci-hub.se/10.1109/iV.2018.00075</a></span></p>
<p><span style="font-size: 0.9rem;">[7] Morth E, Bruckner S, Smit NN. ScrollyVis: interactive visual authoring of guided dynamic narratives for scientific scrollytelling. IEEE Trans Vis Comput Graph. 2023;29(12):5165–77. Available from: <a href="https://doi.org/10.1109/TVCG.2022.3205769">https://doi.org/10.1109/TVCG.2022.3205769</a></span></p>
<p><span style="font-size: 0.9rem;">[8] Australian Bureau of Statistics. TableBuilder [Internet]. Canberra: ABS; 2021 November 19 [cited 2025 December 25]. Available from: <a href="https://www.abs.gov.au/statistics/microdata-tablebuilder/tablebuilder">https://www.abs.gov.au/statistics/microdata-tablebuilder/tablebuilder</a></span></p>
<p><span style="font-size: 0.9rem;">[9] Australian Bureau of Statistics. Socio-Economic Indexes for Areas (SEIFA), Australia [Internet]. Canberra: ABS; 2021 [cited 2025 December 25]. Available from: <a href="https://www.abs.gov.au/statistics/people/people-and-communities/socio-economic-indexes-areas-seifa-australia/latest-release">https://www.abs.gov.au/statistics/people/people-and-communities/socio-economic-indexes-areas-seifa-australia/latest-release</a></span></p>
<p><span style="font-size: 0.9rem;">[10] Australian Bureau of Statistics. Statistical Area Level 2 [Internet]. Canberra: ABS; Jul 2021–Jun 2026 [cited 2025 November 17]. Available from: <a href="https://www.abs.gov.au/statistics/standards/australian-statistical-geography-standard-asgs-edition-3/jul2021-jun2026/main-structure-and-greater-capital-city-statistical-areas/statistical-area-level-2">https://www.abs.gov.au/statistics/standards/australian-statistical-geography-standard-asgs-edition-3/jul2021-jun2026/main-structure-and-greater-capital-city-statistical-areas/statistical-area-level-2</a></span></p>
<p><span style="font-size: 0.9rem;">[11] Australian Bureau of Statistics. Local Government Areas [Internet]. Canberra: ABS; Jul 2021–Jun 2026 [cited 2025 November 17]. Available from: <a href="https://www.abs.gov.au/statistics/standards/australian-statistical-geography-standard-asgs-edition-3/jul2021-jun2026/non-abs-structures/local-government-areas">https://www.abs.gov.au/statistics/standards/australian-statistical-geography-standard-asgs-edition-3/jul2021-jun2026/non-abs-structures/local-government-areas</a></span></p>
<p><span style="font-size: 0.9rem;">[12] Mackey W, Johnson M, Diviny D, Cowgill M, Roney B, Lai W, Wee B. strayr: Ready-to-use Australian common structures and classifications and tools for working with them [software]. R package version 0.1.7; 2023. Available from: <a href="https://runapp-aus.github.io/strayr/">https://runapp-aus.github.io/strayr/</a></span></p>
<p><span style="font-size: 0.9rem;">[13] Australian Bureau of Statistics. Correspondences [Internet]. Canberra: ABS; Jul2021-Jun2026 [cited 2025 December 25]. Available from: <a href="https://www.abs.gov.au/statistics/standards/australian-statistical-geography-standard-asgs-edition-3/jul2021-jun2026/access-and-downloads/correspondences">https://www.abs.gov.au/statistics/standards/australian-statistical-geography-standard-asgs-edition-3/jul2021-jun2026/access-and-downloads/correspondences</a></span></p>
<p><span style="font-size: 0.9rem;">[14] Australian Bureau of Statistics. ASGS: Volume 1—Main structure and greater capital city statistical areas [Internet]. Canberra: ABS; Jul 2016 [cited 2025 December 25]. Available from: <a href="https://www.abs.gov.au/AUSSTATS/abs@.nsf/DetailsPage/1270.0.55.001July%202016?OpenDocument">https://www.abs.gov.au/AUSSTATS/abs@.nsf/DetailsPage/1270.0.55.001July%202016?OpenDocument</a></span></p>
<p><span style="font-size: 0.9rem;">[15] Quarto. Welcome to Quarto [Internet]. Boston, MA: Posit, PBC; [cited 2025 December 22]. Available from: <a href="https://quarto.org/">https://quarto.org/</a></span></p>
<p><span style="font-size: 0.9rem;">[16] Close Read. Close Read [Internet]. [cited 2025 December 22]. Available from: <a href="https://closeread.dev/">https://closeread.dev/</a></span></p>
<p><span style="font-size: 0.9rem;">[17] Quarto. Quarto dashboards [Internet]. Boston (MA): Posit, PBC; [cited 2025 December 22]. Available from: <a href="https://quarto.org/docs/dashboards/">https://quarto.org/docs/dashboards/</a></span></p>
<p><span style="font-size: 0.9rem;">[18] Australian Bureau of Statistics. Changes from the previous edition of the ASGS [Internet]. Canberra: ABS; Jul2021-Jun2026 [cited 2025 December 2]. Available from: <a href="https://www.abs.gov.au/statistics/standards/australian-statistical-geography-standard-asgs-edition-3/jul2021-jun2026/main-structure-and-greater-capital-city-statistical-areas/changes-previous-edition-asgs">https://www.abs.gov.au/statistics/standards/australian-statistical-geography-standard-asgs-edition-3/jul2021-jun2026/main-structure-and-greater-capital-city-statistical-areas/changes-previous-edition-asgs</a></span></p>
<p><span style="font-size: 0.9rem;">[19] Australian Bureau of Statistics. Income and work: Census [Internet]. Canberra: ABS; 2021 [cited 2025 December 23]. Available from: <a href="https://www.abs.gov.au/statistics/labour/earnings-and-working-conditions/income-and-work-census/latest-release">https://www.abs.gov.au/statistics/labour/earnings-and-working-conditions/income-and-work-census/latest-release</a></span></p>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>© Zachary Xie 2025</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>